<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI智能零售柜竞品分析系统</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <!-- SheetJS for Excel handling -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <!-- API Client -->
    <script src="api.js"></script>
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark': {
                            100: '#1e293b',
                            200: '#0f172a',
                            300: '#0c1220',
                            400: '#060a14'
                        },
                        'primary': '#3b82f6',
                        'primary-light': '#60a5fa',
                        'secondary': '#8b5cf6',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'danger': '#ef4444',
                        'info': '#06b6d4'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.15)',
                        'card': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                        'button': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                    },
                    transitionProperty: {
                        'height': 'height',
                        'spacing': 'margin, padding',
                    }
                }
            }
        }


        // 处理文件选择
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.name.endsWith('.xlsx') || file.name.endsWith('.csv')) {
                    document.getElementById('file-name').textContent = file.name;
                    document.getElementById('file-info').classList.remove('hidden');
                    
                    // 解析Excel文件
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = new Uint8Array(e.target.result);
                            const workbook = XLSX.read(data, { type: 'array' });
                            const firstSheetName = workbook.SheetNames[0];
                            const worksheet = workbook.Sheets[firstSheetName];
                            const jsonData = XLSX.utils.sheet_to_json(worksheet);
                            
                            // 显示数据到表格
                            displayDataInTable(jsonData);
                            
                        } catch (error) {
                            showNotification('文件解析失败，请检查文件格式', 'error');
                            console.error('Excel解析错误:', error);
                        }
                    };
                    reader.readAsArrayBuffer(file);
                } else {
                    showNotification('请选择.xlsx或.csv格式的文件', 'warning');
                    event.target.value = '';
                }
            }
        }

        // 显示数据到表格
        function displayDataInTable(data) {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            data.forEach((row, index) => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-dark-100 hover:bg-dark-200';
                
                tr.innerHTML = `
                    <td class="py-2 px-3">
                        <input type="text" value="${row.brand || ''}" class="input-field text-sm" placeholder="品牌" data-field="brand">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" value="${row.model || ''}" class="input-field text-sm" placeholder="型号" data-field="model">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" value="${row.name || ''}" class="input-field text-sm" placeholder="产品名称" data-field="name">
                    </td>
                    <td class="py-2 px-3">
                        <input type="number" value="${row.price || ''}" class="input-field text-sm" placeholder="价格" data-field="price">
                    </td>
                    <td class="py-2 px-3">
                        <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${index}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
            });
            
            // 添加删除行事件
            document.querySelectorAll('.delete-row-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('tr').remove();
                });
            });
        }

        // 加载现有数据到表格
        function loadExistingDataToTable() {
            const existingData = Object.values(productData).map(product => ({
                brand: product.brand,
                model: product.id || Object.keys(productData).find(key => productData[key] === product),
                name: product.name,
                price: product.price
            }));
            
            displayDataInTable(existingData);
        }

        // 添加新行
        function addNewRow() {
            const tbody = document.getElementById('table-body');
            const rowIndex = tbody.children.length;
            
            const tr = document.createElement('tr');
            tr.className = 'border-b border-dark-100 hover:bg-dark-200';
            
            tr.innerHTML = `
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="品牌" data-field="brand">
                </td>
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="型号" data-field="model">
                </td>
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="产品名称" data-field="name">
                </td>
                <td class="py-2 px-3">
                    <input type="number" class="input-field text-sm" placeholder="价格" data-field="price">
                </td>
                <td class="py-2 px-3">
                    <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${rowIndex}">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            `;
            
            tbody.appendChild(tr);
            
            // 添加删除行事件
            tr.querySelector('.delete-row-btn').addEventListener('click', function() {
                tr.remove();
            });
        }

        // 保存表格数据
        function saveTableData() {
            const rows = document.querySelectorAll('#table-body tr');
            const tableData = [];
            
            rows.forEach(row => {
                const rowData = {};
                const inputs = row.querySelectorAll('input');
                
                inputs.forEach(input => {
                    const field = input.dataset.field;
                    const value = input.value.trim();
                    
                    if (field && value) {
                        rowData[field] = field === 'price' ? parseFloat(value) : value;
                    }
                });
                
                if (Object.keys(rowData).length > 0) {
                    tableData.push(rowData);
                }
            });
            
            if (tableData.length === 0) {
                showNotification('表格中没有有效数据', 'warning');
                return;
            }
            
            // 验证必填字段
            const invalidRows = tableData.filter(row => !row.brand || !row.model || !row.name || !row.price);
            if (invalidRows.length > 0) {
                showNotification('请填写所有必填字段（品牌、型号、名称、价格）', 'warning');
                return;
            }
            
            showNotification('数据保存成功', 'success');
            return tableData;
        }

        // 确认导入
        function confirmImport() {
            const tableData = saveTableData();
            if (!tableData) return;
            
            // 处理导入的数据
            const importedProducts = {};
            
            tableData.forEach(row => {
                // 检查是否已存在该型号
                if (productData[row.model]) {
                    // 更新现有产品
                    importedProducts[row.model] = {
                        ...productData[row.model],
                        brand: row.brand,
                        name: row.name,
                        price: row.price
                    };
                } else {
                    // 创建新产品
                    importedProducts[row.model] = {
                        name: row.name,
                        brand: row.brand,
                        price: row.price,
                        color: getBrandColor(row.brand),
                        specs: {
                            '屏幕尺寸': '未指定',
                            '识别技术': '未指定',
                            '识别准确率': '未指定',
                            '货道数量': '未指定',
                            '最大容量': '未指定',
                            '支付方式': '未指定',
                            '尺寸': '未指定',
                            '重量': '未指定',
                            '功率': '未指定',
                            '制冷方式': '未指定',
                            '温度范围': '未指定',
                            '网络连接': '未指定',
                            '操作系统': '未指定',
                            'CPU': '未指定',
                            '内存': '未指定',
                            '存储': '未指定',
                            '触摸屏': '未指定',
                            '摄像头数量': '未指定',
                            'AI芯片': '未指定',
                            '电池续航': '未指定',
                            '防盗系统': '未指定',
                            '远程管理': '未指定',
                            '故障诊断': '未指定',
                            '维护成本': '未指定',
                            '使用寿命': '未指定',
                            '售后服务': '未指定',
                            '软件更新': '未指定',
                            '数据安全': '未指定',
                            '能源效率': '未指定',
                            '噪音水平': '未指定',
                            '安装难度': '未指定'
                        },
                        performance: {
                            '识别速度': 80,
                            '系统响应': 80,
                            '稳定性': 80,
                            '节能性': 80,
                            '扩展性': 80,
                            '用户体验': 80
                        }
                    };
                }
            });
            
            // 合并数据
            Object.assign(productData, importedProducts);
            
            // 更新产品选择列表
            updateProductSelectionList();
            
            // 关闭模态框
            closeExcelModal();
            
            // 显示成功消息
            showNotification(`成功导入 ${tableData.length} 个产品`, 'success');
        }

        // 获取品牌颜色
        function getBrandColor(brand) {
            const brandColors = {
                'HAHA': '#3b82f6',
                'Micromart': '#8b5cf6',
                '365': '#10b981'
            };
            
            return brandColors[brand] || '#6b7280';
        }

        // 更新产品选择列表
        function updateProductSelectionList() {
            // 按品牌分组产品
            const brands = {};
            Object.keys(productData).forEach(model => {
                const product = productData[model];
                if (!brands[product.brand]) {
                    brands[product.brand] = [];
                }
                brands[product.brand].push({ model, ...product });
            });
            
            // 更新选择区域
            const selectionArea = document.querySelector('#comparison-section .grid.grid-cols-1.md\\:grid-cols-3');
            selectionArea.innerHTML = '';
            
            // 为每个品牌创建选择区域
            Object.keys(brands).forEach(brand => {
                const brandProducts = brands[brand];
                const brandColor = getBrandColor(brand);
                
                const brandSection = document.createElement('div');
                brandSection.className = 'space-y-3';
                brandSection.innerHTML = `
                    <h4 class="font-medium" style="color: ${brandColor}">${brand}</h4>
                    <div class="space-y-2">
                        ${brandProducts.map(product => `
                            <label class="flex items-center text-sm">
                                <input type="checkbox" class="form-checkbox h-4 w-4 rounded bg-dark-200 border-dark-100 product-checkbox" 
                                       data-brand="${product.brand}" data-model="${product.model}" data-name="${product.name}"
                                       style="color: ${brandColor}">
                                <span class="ml-2">${product.name}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                
                selectionArea.appendChild(brandSection);
            });
            
            // 重新绑定产品选择事件
            document.querySelectorAll('.product-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', handleProductSelection);
            });
        }

        // 生成模板
        function generateTemplate() {
            const templateData = [
                { brand: 'HAHA', model: 'NEW-100', name: '新产品100', price: 12999 },
                { brand: 'Competitor', model: 'COMP-200', name: '竞争产品200', price: 11999 }
            ];
            
            displayDataInTable(templateData);
            showNotification('模板已生成，请编辑表格数据', 'info');
        }

        // 移除选中的文件
        function removeSelectedFile() {
            document.getElementById('excel-file-input').value = '';
            document.getElementById('file-info').classList.add('hidden');
        }

        // 设置拖放区域
        function setupDragAndDrop() {
            const dropArea = document.querySelector('.border-dashed');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.classList.add('border-primary');
            }
            
            function unhighlight() {
                dropArea.classList.remove('border-primary');
            }
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    const fileInput = document.getElementById('excel-file-input');
                    fileInput.files = files;
                    
                    // 触发change事件
                    const event = new Event('change');
                    fileInput.dispatchEvent(event);
                }
            }
        }

        // 关闭Excel模态框
        function closeExcelModal() {
            document.getElementById('import-excel-modal').classList.add('hidden');
            // 重置文件输入
            document.getElementById('excel-file-input').value = '';
            document.getElementById('file-info').classList.add('hidden');
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .glass-effect {
                background: rgba(13, 17, 23, 0.8);
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                border: 1px solid rgba(30, 64, 175, 0.3);
                box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            }
            .glass-effect-light {
                background: rgba(17, 24, 39, 0.9);
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                border: 1px solid rgba(30, 64, 175, 0.2);
                box-shadow: 0 4px 16px 0 rgba(31, 38, 135, 0.15);
            }
            .btn-primary {
                @apply px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 shadow-button hover:shadow-lg transform hover:-translate-y-0.5 active:translate-y-0 active:shadow-sm;
            }
            .btn-secondary {
                @apply px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/50 shadow-sm hover:shadow active:shadow;
            }
            .btn-success {
                @apply px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50 shadow-sm hover:shadow active:shadow;
            }
            .btn-info {
                @apply px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 shadow-sm hover:shadow active:shadow;
            }
            .btn-loading {
                @apply opacity-70 cursor-not-allowed;
            }
            .spinner {
                @apply animate-spin rounded-full h-4 w-4 border-2 border-t-transparent border-white inline-block;
            }
            .input-field {
                @apply w-full px-4 py-2 bg-gray-800 border border-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all duration-200;
            }
            .card {
                @apply glass-effect-light rounded-lg overflow-hidden;
            }
            .card-hover {
                @apply hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 hover:bg-opacity-95;
            }
            .card {
                @apply glass-effect-light rounded-lg overflow-hidden transition-all duration-300;
            }
            .card:hover {
                @apply shadow-lg transform hover:-translate-y-1;
            }
            .nav-item {
                @apply relative overflow-hidden;
            }
            .nav-item::before {
                content: '';
                @apply absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-600/10 to-blue-600/0 transform -translate-x-full transition-transform duration-500;
            }
            .nav-item:hover::before {
                @apply translate-x-full;
            }
            .btn-primary::before {
                content: '';
                @apply absolute inset-0 bg-gradient-to-r from-blue-700/0 via-blue-700/30 to-blue-700/0 transform -translate-x-full transition-transform duration-500;
            }
            .btn-primary:hover::before {
                @apply translate-x-full;
            }
            .input-field:focus {
                animation: pulse-border 2s infinite;
            }
            @keyframes pulse-border {
                0%, 100% {
                    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
                }
                50% {
                    box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
                }
            }
            .card-header {
                @apply flex justify-between items-center mb-4;
            }
            .card-title {
                @apply font-semibold text-white;
            }
            .badge {
                @apply px-2 py-0.5 text-xs rounded-full;
            }
            .badge-blue {
                @apply bg-blue-500/20 text-blue-400;
            }
            .badge-green {
                @apply bg-green-500/20 text-green-400;
            }
            .badge-yellow {
                @apply bg-yellow-500/20 text-yellow-400;
            }
            .badge-gray {
                @apply bg-gray-500/20 text-gray-400;
            }
            .tab {
                @apply px-4 py-2 text-gray-400 hover:text-white border-b-2 border-transparent hover:border-blue-500 transition-all duration-200;
            }
            .tab-active {
                @apply text-white border-b-2 border-blue-500;
            }
            .animate-pulse {
                animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            @keyframes pulse {
                0%, 100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }
            .animate-fade-in {
                animation: fadeIn 0.3s ease-in-out;
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            .animate-scale-in {
                animation: scaleIn 0.3s ease-in-out;
            }
            @keyframes scaleIn {
                from {
                    opacity: 0;
                    transform: scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans min-h-screen">
    <!-- 背景动画层 -->
    <div id="particleBackground" class="fixed inset-0 z-0 opacity-20"></div>
    
    <!-- 背景渐变层 -->
    <div class="fixed inset-0 z-0 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"></div>
    
    <!-- 通知组件 -->
    <div id="notification" class="fixed top-4 right-4 z-50 max-w-md bg-white rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ease-out">
        <div class="p-4 flex items-start">
            <div id="notification-icon" class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-3"></div>
            <div class="flex-1">
                <h4 id="notification-title" class="font-semibold text-gray-900"></h4>
                <p id="notification-message" class="text-sm text-gray-600 mt-1"></p>
            </div>
            <button id="notification-close" class="flex-shrink-0 text-gray-400 hover:text-gray-600 ml-2">
                <i class="fa fa-times"></i>
            </button>
        </div>
    </div>
    
    <script>
        // 显示通知
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const icon = document.getElementById('notification-icon');
            const title = document.getElementById('notification-title');
            const messageEl = document.getElementById('notification-message');
            
            // 设置通知类型
            const types = {
                success: {
                    title: '成功',
                    icon: 'fa-check',
                    bg: 'bg-green-50',
                    iconBg: 'bg-green-100 text-green-600'
                },
                error: {
                    title: '错误',
                    icon: 'fa-exclamation-circle',
                    bg: 'bg-red-50',
                    iconBg: 'bg-red-100 text-red-600'
                },
                warning: {
                    title: '警告',
                    icon: 'fa-exclamation-triangle',
                    bg: 'bg-yellow-50',
                    iconBg: 'bg-yellow-100 text-yellow-600'
                },
                info: {
                    title: '信息',
                    icon: 'fa-info-circle',
                    bg: 'bg-blue-50',
                    iconBg: 'bg-blue-100 text-blue-600'
                }
            };
            
            const config = types[type] || types.info;
            
            // 更新通知内容
            notification.className = `fixed top-4 right-4 z-50 max-w-md ${config.bg} rounded-lg shadow-lg transform translate-x-0 transition-transform duration-300 ease-out`;
            icon.className = `flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-3 ${config.iconBg}`;
            icon.innerHTML = `<i class="fa ${config.icon}"></i>`;
            title.textContent = config.title;
            messageEl.textContent = message;
            
            // 显示通知
            notification.style.transform = 'translateX(0)';
            
            // 3秒后自动隐藏
            setTimeout(() => {
                notification.style.transform = 'translateX(calc(100% + 1rem))';
            }, 3000);
        }
        
        // 关闭通知
        document.getElementById('notification-close').addEventListener('click', function() {
            const notification = document.getElementById('notification');
            notification.style.transform = 'translateX(calc(100% + 1rem))';
        });
    </script>

    <div class="relative z-10 flex h-screen overflow-hidden">
        <!-- 侧边导航栏 -->
        <aside class="w-64 glass-effect hidden md:block transition-all duration-300 ease-in-out hover:shadow-lg">
            <div class="p-5 border-b border-white/10 flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-600 flex items-center justify-center rounded-lg shadow-md">
                    <i class="fa fa-shopping-cart text-white"></i>
                </div>
                <div class="text-white font-bold text-xl">HAHA</div>
            </div>
            <nav class="p-4 space-y-1">
                <a href="#dashboard" class="nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-blue-600/10 transition-all duration-200 group relative overflow-hidden" data-section="dashboard">
                    <i class="fa fa-dashboard w-5 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"></i>
                    <span>仪表盘</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 transform scale-y-0 transition-transform duration-200 group-hover:scale-y-100"></span>
                </a>
                <a href="#competitors" class="nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-blue-600/10 transition-all duration-200 group relative overflow-hidden" data-section="competitors">
                    <i class="fa fa-building w-5 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"></i>
                    <span>竞品管理</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 transform scale-y-0 transition-transform duration-200 group-hover:scale-y-100"></span>
                </a>
                <a href="#analysis" class="nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-blue-600/10 transition-all duration-200 group relative overflow-hidden" data-section="analysis">
                    <i class="fa fa-file-text w-5 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"></i>
                    <span>分析报告</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 transform scale-y-0 transition-transform duration-200 group-hover:scale-y-100"></span>
                </a>
                <a href="#insights" class="nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-blue-600/10 transition-all duration-200 group relative overflow-hidden" data-section="insights">
                    <i class="fa fa-lightbulb-o w-5 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"></i>
                    <span>市场洞察</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 transform scale-y-0 transition-transform duration-200 group-hover:scale-y-100"></span>
                </a>
                <a href="#comparison" class="nav-item flex items-center gap-3 p-3 rounded-lg hover:bg-blue-600/10 transition-all duration-200 group relative overflow-hidden" data-section="comparison">
                    <i class="fa fa-balance-scale w-5 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"></i>
                    <span>产品对比</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500 transform scale-y-0 transition-transform duration-200 group-hover:scale-y-100"></span>
                </a>
                <a href="#settings" class="nav-item flex items-center gap-3 p-3 rounded-lg bg-blue-600/20 text-blue-400 transition-all duration-200 group relative overflow-hidden" data-section="settings">
                    <i class="fa fa-cog w-5 text-blue-400"></i>
                    <span>系统设置</span>
                    <span class="absolute left-0 top-0 bottom-0 w-1 bg-blue-500"></span>
                </a>
            </nav>
            <div class="absolute bottom-0 w-64 p-4 border-t border-white/10">
                <div class="flex items-center gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-all duration-200">
                    <div class="w-10 h-10 bg-blue-600/20 flex items-center justify-center rounded-full">
                        <i class="fa fa-user text-blue-400"></i>
                    </div>
                    <div>
                        <p class="font-medium">产品经理</p>
                        <p class="text-xs text-blue-400">HAHA SMART</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 移动端导航 -->
        <div class="md:hidden fixed bottom-0 left-0 right-0 glass-effect z-20 border-t border-white/10 shadow-lg">
            <div class="flex justify-around">
                <a href="#dashboard" class="flex flex-col items-center py-3 px-2 text-primary transition-all duration-200 group relative flex-1" data-section="dashboard">
                    <i class="fa fa-dashboard text-lg group-hover:scale-110 transition-transform duration-200"></i>
                    <span class="text-xs mt-1 whitespace-nowrap">仪表盘</span>
                    <span class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1/2 h-0.5 bg-primary rounded-full"></span>
                </a>
                <a href="#competitors" class="flex flex-col items-center py-3 px-2 text-gray-400 hover:text-blue-400 transition-all duration-200 group relative flex-1" data-section="competitors">
                    <i class="fa fa-building text-lg group-hover:scale-110 transition-transform duration-200"></i>
                    <span class="text-xs mt-1 whitespace-nowrap">竞品</span>
                    <span class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1/2 h-0.5 bg-blue-500 rounded-full scale-x-0 group-hover:scale-x-100 transition-transform duration-200"></span>
                </a>
                <a href="#analysis" class="flex flex-col items-center py-3 px-2 text-gray-400 hover:text-blue-400 transition-all duration-200 group relative flex-1" data-section="analysis">
                    <i class="fa fa-file-text text-lg group-hover:scale-110 transition-transform duration-200"></i>
                    <span class="text-xs mt-1 whitespace-nowrap">报告</span>
                    <span class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1/2 h-0.5 bg-blue-500 rounded-full scale-x-0 group-hover:scale-x-100 transition-transform duration-200"></span>
                </a>
                <a href="#insights" class="flex flex-col items-center py-3 px-2 text-gray-400 hover:text-blue-400 transition-all duration-200 group relative flex-1" data-section="insights">
                    <i class="fa fa-lightbulb-o text-lg group-hover:scale-110 transition-transform duration-200"></i>
                    <span class="text-xs mt-1 whitespace-nowrap">洞察</span>
                    <span class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1/2 h-0.5 bg-blue-500 rounded-full scale-x-0 group-hover:scale-x-100 transition-transform duration-200"></span>
                </a>
                <a href="#settings" class="flex flex-col items-center py-3 px-2 text-gray-400 hover:text-blue-400 transition-all duration-200 group relative flex-1" data-section="settings">
                    <i class="fa fa-cog text-lg group-hover:scale-110 transition-transform duration-200"></i>
                    <span class="text-xs mt-1 whitespace-nowrap">设置</span>
                    <span class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1/2 h-0.5 bg-blue-500 rounded-full scale-x-0 group-hover:scale-x-100 transition-transform duration-200"></span>
                </a>
            </div>
        </div>

        <!-- 主内容区域 -->
        <main class="flex-1 overflow-y-auto pb-16 md:pb-0">
            <!-- 顶部导航栏 -->
            <header class="glass-effect sticky top-0 z-10 border-b border-white/10 shadow-sm">
                <div class="flex justify-between items-center px-6 py-3">
                    <div class="flex items-center gap-4">
                        <button id="mobile-menu-button" class="md:hidden text-gray-400 hover:text-white transition-all duration-200 p-2 rounded-lg hover:bg-white/5">
                            <i class="fa fa-bars text-xl"></i>
                        </button>
                        <h2 class="text-xl font-semibold text-white" id="page-title">系统设置</h2>
                    </div>
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <input type="text" placeholder="搜索..." class="pl-8 pr-4 py-2 bg-gray-800 border border-gray-700 text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-48 transition-all duration-200 focus:w-64 focus:border-blue-500">
                            <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                        <div class="flex items-center gap-3">
                            <button class="w-9 h-9 bg-blue-600/20 flex items-center justify-center rounded-full hover:bg-blue-600/30 transition-all duration-200 group">
                                <i class="fa fa-robot text-blue-400 group-hover:scale-110 transition-transform duration-200"></i>
                            </button>
                            <div class="relative">
                                <button class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-white/10 transition-all duration-200 group">
                                    <i class="fa fa-bell text-gray-400 hover:text-white group-hover:scale-110 transition-transform duration-200"></i>
                                    <span class="absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 内容区域 -->
            <div class="p-4 md:p-6 lg:p-8">
                <!-- 仪表盘部分 -->
                <section id="dashboard-section" class="section active">
                    <!-- 概览卡片 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- 已分析竞品 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase tracking-wider">已分析竞品</p>
                                    <h3 class="text-2xl font-bold text-white mt-1">9</h3>
                                    <p class="text-sm text-green-400 mt-1 flex items-center font-medium">
                                        <i class="fa fa-arrow-up mr-1"></i> 12% 较上月
                                    </p>
                                </div>
                                <div class="p-3 rounded-lg bg-primary/10 text-primary group-hover:scale-110 transition-transform duration-200">
                                    <i class="fa fa-building text-lg"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 分析报告 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase tracking-wider">分析报告</p>
                                    <h3 class="text-2xl font-bold text-white mt-1">16</h3>
                                    <p class="text-sm text-green-400 mt-1 flex items-center font-medium">
                                        <i class="fa fa-arrow-up mr-1"></i> 8% 较上月
                                    </p>
                                </div>
                                <div class="p-3 rounded-lg bg-success/10 text-success group-hover:scale-110 transition-transform duration-200">
                                    <i class="fa fa-file-text text-lg"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI识别技术 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase tracking-wider">AI识别技术</p>
                                    <h3 class="text-2xl font-bold text-white mt-1">78%</h3>
                                    <p class="text-sm text-red-400 mt-1 flex items-center font-medium">
                                        <i class="fa fa-arrow-down mr-1"></i> 3% 较上月
                                    </p>
                                </div>
                                <div class="p-3 rounded-lg bg-warning/10 text-warning group-hover:scale-110 transition-transform duration-200">
                                    <i class="fa fa-eye text-lg"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 市场覆盖率 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-xs font-medium text-gray-400 uppercase tracking-wider">市场覆盖率</p>
                                    <h3 class="text-2xl font-bold text-white mt-1">62%</h3>
                                    <p class="text-sm text-green-400 mt-1 flex items-center font-medium">
                                        <i class="fa fa-arrow-up mr-1"></i> 5% 较上月
                                    </p>
                                </div>
                                <div class="p-3 rounded-lg bg-danger/10 text-danger group-hover:scale-110 transition-transform duration-200">
                                    <i class="fa fa-pie-chart text-lg"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 图表区域 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <!-- 竞品技术对比 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-white">竞品技术对比</h3>
                                <div class="flex space-x-2">
                                    <button class="px-3 py-1.5 text-xs bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50">月度</button>
                                    <button class="px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50">季度</button>
                                    <button class="px-3 py-1.5 text-xs bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50">年度</button>
                                </div>
                            </div>
                            <div class="h-72 rounded-lg overflow-hidden bg-dark-300/50 p-4">
                                <canvas id="tech-comparison-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- 市场占有率 -->
                        <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-white">市场占有率</h3>
                                <div class="flex space-x-2">
                                    <button class="px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50">全部</button>
                                    <button class="px-3 py-1.5 text-xs bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50">AI零售柜</button>
                                </div>
                            </div>
                            <div class="h-72 rounded-lg overflow-hidden bg-dark-300/50 p-4">
                                <canvas id="market-share-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- 最近分析 -->
                    <div class="glass-effect-light p-5 rounded-lg mb-8 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">最近分析</h3>
                            <a href="#analysis" class="text-sm text-primary hover:underline transition-colors duration-200 flex items-center gap-1 group font-medium">
                                <span>查看全部</span>
                                <i class="fa fa-arrow-right text-xs group-hover:translate-x-1 transition-transform duration-200"></i>
                            </a>
                        </div>
                        <div class="overflow-x-auto rounded-lg border border-white/5">
                            <table class="min-w-full">
                                <thead>
                                    <tr class="bg-dark-300/50">
                                        <th class="text-left py-4 px-6 text-sm font-medium text-gray-400">竞品名称</th>
                                        <th class="text-left py-4 px-6 text-sm font-medium text-gray-400">分析日期</th>
                                        <th class="text-left py-4 px-6 text-sm font-medium text-gray-400">分析维度</th>
                                        <th class="text-left py-4 px-6 text-sm font-medium text-gray-400">状态</th>
                                        <th class="text-right py-4 px-6 text-sm font-medium text-gray-400">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-white/5 hover:bg-white/5 transition-colors duration-200">
                                        <td class="py-4 px-6">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-primary/10 flex items-center justify-center text-primary mr-3 rounded-lg group-hover:scale-110 transition-transform duration-200">
                                                    <i class="fa fa-shopping-cart"></i>
                                                </div>
                                                <span class="font-medium">HAHA</span>
                                            </div>
                                        </td>
                                        <td class="py-4 px-6 text-sm text-gray-400">2023-07-15</td>
                                        <td class="py-4 px-6 text-sm text-gray-400">技术、市场、用户体验</td>
                                        <td class="py-4 px-6">
                                            <span class="px-3 py-1.5 bg-green-500/20 text-green-400 text-xs rounded-full">已完成</span>
                                        </td>
                                        <td class="py-4 px-6 text-right">
                                            <button class="text-primary hover:text-blue-400 transition-colors duration-200 p-2 rounded-full hover:bg-blue-600/10 group">
                                                <i class="fa fa-eye group-hover:scale-110 transition-transform duration-200"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="border-b border-white/5 hover:bg-white/5 transition-colors duration-200">
                                        <td class="py-4 px-6">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-secondary/10 flex items-center justify-center text-secondary mr-3 rounded-lg group-hover:scale-110 transition-transform duration-200">
                                                    <i class="fa fa-shopping-cart"></i>
                                                </div>
                                                <span class="font-medium">Micromart</span>
                                            </div>
                                        </td>
                                        <td class="py-4 px-6 text-sm text-gray-400">2023-07-12</td>
                                        <td class="py-4 px-6 text-sm text-gray-400">技术、成本、运营</td>
                                        <td class="py-4 px-6">
                                            <span class="px-3 py-1.5 bg-green-500/20 text-green-400 text-xs rounded-full">已完成</span>
                                        </td>
                                        <td class="py-4 px-6 text-right">
                                            <button class="text-primary hover:text-blue-400 transition-colors duration-200 p-2 rounded-full hover:bg-blue-600/10 group">
                                                <i class="fa fa-eye group-hover:scale-110 transition-transform duration-200"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-white/5 transition-colors duration-200">
                                        <td class="py-4 px-6">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-success/10 flex items-center justify-center text-success mr-3 rounded-lg group-hover:scale-110 transition-transform duration-200">
                                                    <i class="fa fa-shopping-cart"></i>
                                                </div>
                                                <span class="font-medium">365</span>
                                            </div>
                                        </td>
                                        <td class="py-4 px-6 text-sm text-gray-400">2023-07-08</td>
                                        <td class="py-4 px-6 text-sm text-gray-400">市场、用户体验</td>
                                        <td class="py-4 px-6">
                                            <span class="px-3 py-1.5 bg-green-500/20 text-green-400 text-xs rounded-full">已完成</span>
                                        </td>
                                        <td class="py-4 px-6 text-right">
                                            <button class="text-primary hover:text-blue-400 transition-colors duration-200 p-2 rounded-full hover:bg-blue-600/10 group">
                                                <i class="fa fa-eye group-hover:scale-110 transition-transform duration-200"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 行业趋势 -->
                    <div class="glass-effect-light p-5 rounded-lg hover:shadow-lg transition-all duration-300">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">行业趋势</h3>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg transition-colors duration-200">技术成熟度</button>
                                <button class="px-3 py-1.5 text-xs bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors duration-200">市场规模</button>
                            </div>
                        </div>
                        <div class="h-72">
                            <canvas id="industry-trends-chart"></canvas>
                        </div>
                    </div>
                </section>

                <!-- 竞品管理部分 -->
                <section id="competitors-section" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">竞品管理</h2>
                        <button class="btn-primary flex items-center gap-2" id="add-competitor-btn">
                            <i class="fa fa-plus"></i>
                            <span>添加竞品</span>
                        </button>
                    </div>

                    <!-- 添加竞品模态框 -->
                    <div id="add-competitor-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
                        <div class="glass-effect p-6 w-full max-w-md transform scale-95 transition-transform duration-300 rounded-xl shadow-xl">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-white">添加竞品</h3>
                                <button class="text-gray-400 hover:text-white transition-colors duration-200 p-2 rounded-full hover:bg-white/5 group" id="close-modal-btn">
                                    <i class="fa fa-times group-hover:scale-110 transition-transform duration-200"></i>
                                </button>
                            </div>
                            <form id="add-competitor-form">
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">竞品名称</label>
                                    <input type="text" class="input-field" placeholder="输入竞品名称" required="">
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">网站URL</label>
                                    <input type="url" class="input-field" placeholder="https://example.com" required="">
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">分类</label>
                                    <select class="input-field">
                                        <option value="ai-retail" selected="">AI智能零售柜</option>
                                        <option value="traditional">传统零售柜</option>
                                        <option value="hybrid">混合模式</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">描述</label>
                                    <textarea class="input-field" rows="3" placeholder="简要描述竞品特点"></textarea>
                                </div>
                                <div class="flex justify-end gap-3 mt-6">
                                    <button type="button" class="btn-secondary" id="cancel-add-btn">取消</button>
                                    <button type="button" class="btn-primary" id="start-analysis-btn">
                                        <span id="start-analysis-text">开始分析</span>
                                        <span id="start-analysis-loading" class="hidden">
                                            <span class="spinner mr-2"></span> 分析中...
                                        </span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 分析进度模态框 -->
                    <div id="analysis-progress-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
                        <div class="glass-effect p-6 w-full max-w-md transform scale-95 transition-transform duration-300 rounded-xl shadow-xl">
                            <div class="text-center">
                                <h3 class="text-lg font-semibold mb-4 text-white">正在分析竞品数据</h3>
                                <div class="mb-4">
                                    <div class="w-full bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full transition-all duration-500 ease-out" id="progress-value" style="width: 0%"></div>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-2" id="progress-text">正在初始化...</p>
                                </div>
                                <p class="text-sm text-gray-500 mb-6">系统正在爬取和分析竞品网站数据，请稍候...</p>
                                <button class="btn-secondary opacity-50 cursor-not-allowed" id="cancel-analysis-btn" disabled="">取消</button>
                            </div>
                        </div>
                    </div>

                    <!-- 竞品列表 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- 竞品卡片 1 -->
                        <div class="glass-effect-light p-4 hover:shadow-lg transition-all duration-300">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-primary/10 flex items-center justify-center text-primary mr-3">
                                        <i class="fa fa-shopping-cart"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-white">HAHA</h3>
                                        <p class="text-xs text-gray-400">AI智能零售柜</p>
                                    </div>
                                </div>
                                <div class="dropdown relative">
                                    <button class="text-gray-400 hover:text-white">
                                        <i class="fa fa-ellipsis-v"></i>
                                    </button>
                                    <div class="dropdown-menu absolute right-0 mt-2 w-48 glass-effect py-1 hidden">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">查看详情</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">编辑</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-red-400 hover:bg-dark-100">删除</a>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">网站: <a href="#" class="text-primary hover:underline">https://haha-retail.com</a></p>
                                <p class="text-sm text-gray-400">上次分析: 2023-07-15</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">AI识别技术</span>
                                    <span class="font-medium text-white">85%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">货道设计</span>
                                    <span class="font-medium text-white">72%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 72%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">支付方式</span>
                                    <span class="font-medium text-white">90%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 90%"></div>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-eye mr-1"></i> 查看报告
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-refresh mr-1"></i> 重新分析
                                </button>
                            </div>
                        </div>

                        <!-- 竞品卡片 2 -->
                        <div class="glass-effect-light p-4 hover:shadow-lg transition-all duration-300">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-secondary/10 flex items-center justify-center text-secondary mr-3">
                                        <i class="fa fa-shopping-cart"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-white">Micromart</h3>
                                        <p class="text-xs text-gray-400">AI智能零售柜</p>
                                    </div>
                                </div>
                                <div class="dropdown relative">
                                    <button class="text-gray-400 hover:text-white">
                                        <i class="fa fa-ellipsis-v"></i>
                                    </button>
                                    <div class="dropdown-menu absolute right-0 mt-2 w-48 glass-effect py-1 hidden">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">查看详情</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">编辑</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-red-400 hover:bg-dark-100">删除</a>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">网站: <a href="#" class="text-primary hover:underline">https://micromart.com</a></p>
                                <p class="text-sm text-gray-400">上次分析: 2023-07-12</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">AI识别技术</span>
                                    <span class="font-medium text-white">78%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 78%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">货道设计</span>
                                    <span class="font-medium text-white">95%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 95%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">支付方式</span>
                                    <span class="font-medium text-white">70%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 70%"></div>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-eye mr-1"></i> 查看报告
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-refresh mr-1"></i> 重新分析
                                </button>
                            </div>
                        </div>

                        <!-- 竞品卡片 3 -->
                        <div class="card card-hover p-4">
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-success/10 flex items-center justify-center text-success mr-3">
                                        <i class="fa fa-shopping-cart"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-white">365</h3>
                                        <p class="text-xs text-gray-400">AI智能零售柜</p>
                                    </div>
                                </div>
                                <div class="dropdown relative">
                                    <button class="text-gray-400 hover:text-white">
                                        <i class="fa fa-ellipsis-v"></i>
                                    </button>
                                    <div class="dropdown-menu absolute right-0 mt-2 w-48 bg-dark-200 border border-dark-100 shadow-lg py-1 hidden">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">查看详情</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-400 hover:bg-dark-100 hover:text-white">编辑</a>
                                        <a href="#" class="block px-4 py-2 text-sm text-red-400 hover:bg-dark-100">删除</a>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">网站: <a href="#" class="text-primary hover:underline">https://365-retail.com</a></p>
                                <p class="text-sm text-gray-400">上次分析: 2023-07-08</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">AI识别技术</span>
                                    <span class="font-medium text-white">92%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 92%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">货道设计</span>
                                    <span class="font-medium text-white">68%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 68%"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">支付方式</span>
                                    <span class="font-medium text-white">75%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-value" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-eye mr-1"></i> 查看报告
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-refresh mr-1"></i> 重新分析
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 分析报告部分 -->
                <section id="analysis-section" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">分析报告</h2>
                        <button class="btn-primary flex items-center gap-2" id="generate-report-btn">
                            <i class="fa fa-plus"></i>
                            <span>生成报告</span>
                        </button>
                    </div>

                    <!-- 生成报告模态框 -->
                    <div id="generate-report-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="bg-dark-200 p-6 w-full max-w-lg border border-dark-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-white">生成竞品分析报告</h3>
                                <button class="text-gray-400 hover:text-white" id="close-report-modal-btn">
                                    <i class="fa fa-times"></i>
                                </button>
                            </div>
                            <form id="generate-report-form">
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">报告名称</label>
                                    <input type="text" class="input-field" placeholder="输入报告名称" required="">
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">选择竞品</label>
                                    <div class="border border-dark-100 rounded p-3 max-h-40 overflow-y-auto">
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="competitor1" class="mr-2" checked="">
                                            <label for="competitor1" class="text-sm">HAHA</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="competitor2" class="mr-2" checked="">
                                            <label for="competitor2" class="text-sm">Micromart</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="competitor3" class="mr-2" checked="">
                                            <label for="competitor3" class="text-sm">365</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="competitor4" class="mr-2">
                                            <label for="competitor4" class="text-sm">vendera</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input type="checkbox" id="competitor5" class="mr-2">
                                            <label for="competitor5" class="text-sm">sandstar</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">分析维度</label>
                                    <div class="border border-dark-100 rounded p-3 max-h-40 overflow-y-auto">
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="dimension1" class="mr-2" checked="">
                                            <label for="dimension1" class="text-sm">AI识别技术</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="dimension2" class="mr-2" checked="">
                                            <label for="dimension2" class="text-sm">货道设计</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="dimension3" class="mr-2" checked="">
                                            <label for="dimension3" class="text-sm">支付方式</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="dimension4" class="mr-2" checked="">
                                            <label for="dimension4" class="text-sm">用户体验</label>
                                        </div>
                                        <div class="flex items-center mb-3">
                                            <input type="checkbox" id="dimension5" class="mr-2">
                                            <label for="dimension5" class="text-sm">成本结构</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input type="checkbox" id="dimension6" class="mr-2">
                                            <label for="dimension6" class="text-sm">运营模式</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">报告类型</label>
                                    <select class="input-field">
                                        <option value="comprehensive" selected="">综合分析报告</option>
                                        <option value="technical">技术对比报告</option>
                                        <option value="market">市场分析报告</option>
                                        <option value="user">用户体验报告</option>
                                    </select>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">AI提示词 <span class="text-xs text-gray-500">(可选，用于指导AI分析方向)</span></label>
                                    <textarea class="input-field" rows="3" placeholder="例如：重点分析AI识别技术的准确率和稳定性，以及在不同光线条件下的表现..." id="report-ai-prompt"></textarea>
                                    <div class="mt-2 flex flex-wrap gap-2">
                                        <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded prompt-preset">重点关注技术差异</button>
                                        <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded prompt-preset">分析市场趋势</button>
                                        <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded prompt-preset">对比成本结构</button>
                                        <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded prompt-preset">用户体验优化建议</button>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-400 mb-1">AI模型选择</label>
                                    <div class="flex items-center gap-3">
                                        <select class="input-field flex-1" id="report-ai-model">
                                            <option value="default">使用系统默认模型</option>
                                            <option value="gpt-4">GPT-4</option>
                                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                            <option value="claude-3">Claude 3</option>
                                            <option value="tongyi-qianwen">通义千问</option>
                                            <option value="wenxin-yiyan">文心一言</option>
                                        </select>
                                        <button class="btn-secondary text-sm" id="view-model-info">
                                            <i class="fa fa-info-circle mr-1"></i> 模型信息
                                        </button>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-500 flex items-center">
                                        <i class="fa fa-lightbulb-o text-warning mr-1"></i>
                                        <span>提示：不同模型的分析能力和侧重点有所不同，请根据需求选择合适的模型</span>
                                    </div>
                                </div>
                                <div class="flex justify-end gap-3 mt-6">
                                    <button type="button" class="btn-secondary" id="cancel-report-btn">取消</button>
                                    <button type="button" class="btn-primary" id="confirm-generate-btn">生成报告</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 报告列表 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- 报告卡片 1 -->
                        <div class="card card-hover p-4">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-semibold text-white">HAHA竞品综合分析</h3>
                                    <p class="text-xs text-gray-400">综合分析报告</p>
                                </div>
                                <span class="badge badge-blue">最新</span>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">分析竞品: HAHA, Micromart, 365</p>
                                <p class="text-sm text-gray-400">生成时间: 2023-07-15 14:30</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">AI识别技术</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">货道设计</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">支付方式</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">用户体验</span>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-download mr-1"></i> 下载
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-eye mr-1"></i> 查看
                                </button>
                            </div>
                        </div>

                        <!-- 报告卡片 2 -->
                        <div class="card card-hover p-4">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-semibold text-white">Micromart技术对比</h3>
                                    <p class="text-xs text-gray-400">技术对比报告</p>
                                </div>
                                <span class="badge badge-gray">历史</span>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">分析竞品: Micromart, HAHA</p>
                                <p class="text-sm text-gray-400">生成时间: 2023-07-12 10:15</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">AI识别技术</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">货道设计</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">成本结构</span>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-download mr-1"></i> 下载
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-eye mr-1"></i> 查看
                                </button>
                            </div>
                        </div>

                        <!-- 报告卡片 3 -->
                        <div class="card card-hover p-4">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="font-semibold text-white">365市场分析</h3>
                                    <p class="text-xs text-gray-400">市场分析报告</p>
                                </div>
                                <span class="badge badge-gray">历史</span>
                            </div>
                            <div class="mb-4">
                                <p class="text-sm text-gray-400 mb-2">分析竞品: 365, HAHA, Micromart</p>
                                <p class="text-sm text-gray-400">生成时间: 2023-07-08 16:45</p>
                            </div>
                            <div class="mb-4">
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">市场份额</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">用户体验</span>
                                    <span class="text-xs bg-dark-200 px-2 py-1 rounded">运营模式</span>
                                </div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button class="btn-secondary flex-1 mr-2">
                                    <i class="fa fa-download mr-1"></i> 下载
                                </button>
                                <button class="btn-primary flex-1 ml-2">
                                    <i class="fa fa-eye mr-1"></i> 查看
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 报告详情 -->
                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-white mb-4">HAHA竞品综合分析报告</h3>
                        
                        <!-- 报告标签页 -->
                        <div class="border-b border-dark-100 mb-6">
                            <div class="flex space-x-6">
                                <button class="tab tab-active" data-tab="overview">概览</button>
                                <button class="tab" data-tab="ai-tech">AI识别技术</button>
                                <button class="tab" data-tab="channel">货道设计</button>
                                <button class="tab" data-tab="payment">支付方式</button>
                                <button class="tab" data-tab="user-exp">用户体验</button>
                            </div>
                        </div>

                        <!-- 概览标签页内容 -->
                        <div class="report-tab active" id="overview-tab">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                                <!-- 竞品对比雷达图 -->
                                <div class="card card-hover p-4">
                                    <div class="card-header">
                                        <h4 class="card-title">竞品多维度对比</h4>
                                        <div class="flex space-x-2">
                                            <button class="px-2 py-1 text-xs bg-primary text-white rounded">全部维度</button>
                                            <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">自定义</button>
                                        </div>
                                    </div>
                                    <div class="h-64">
                                        <canvas id="radar-comparison-chart"></canvas>
                                    </div>
                                </div>

                                <!-- 关键发现 -->
                                <div class="card card-hover p-4">
                                    <div class="card-header">
                                        <h4 class="card-title">关键发现</h4>
                                        <button class="text-primary hover:text-primary-light text-sm">
                                            <i class="fa fa-refresh mr-1"></i> 刷新
                                        </button>
                                    </div>
                                    <div class="space-y-4">
                                        <div class="flex items-start">
                                            <div class="p-2 rounded bg-primary/10 text-primary mr-3 mt-1">
                                                <i class="fa fa-lightbulb-o"></i>
                                            </div>
                                            <div>
                                                <h5 class="font-medium text-white mb-1">AI识别技术领先者</h5>
                                                <p class="text-sm text-gray-400">365在AI识别技术方面领先其他竞品，准确率达到92%，特别是在复杂环境下的表现更为突出。</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="p-2 rounded bg-warning/10 text-warning mr-3 mt-1">
                                                <i class="fa fa-exclamation-triangle"></i>
                                            </div>
                                            <div>
                                                <h5 class="font-medium text-white mb-1">货道设计差距明显</h5>
                                                <p class="text-sm text-gray-400">Micromart在货道设计方面遥遥领先，空间利用率比HAHA高出23%，比365高出27%。</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="p-2 rounded bg-success/10 text-success mr-3 mt-1">
                                                <i class="fa fa-check-circle"></i>
                                            </div>
                                            <div>
                                                <h5 class="font-medium text-white mb-1">支付方式多样化</h5>
                                                <p class="text-sm text-gray-400">HAHA在支付方式方面表现最佳，支持12种不同的支付方式，包括最新的生物识别支付。</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 竞品对比表格 -->
                            <div class="card card-hover p-4 mb-6">
                                <div class="card-header">
                                    <h4 class="card-title">竞品详细对比</h4>
                                    <div class="flex space-x-2">
                                        <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">
                                            <i class="fa fa-filter mr-1"></i> 筛选
                                        </button>
                                        <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">
                                            <i class="fa fa-download mr-1"></i> 导出
                                        </button>
                                    </div>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full">
                                        <thead>
                                            <tr class="border-b border-dark-100">
                                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-400">维度</th>
                                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-400">HAHA</th>
                                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-400">Micromart</th>
                                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-400">365</th>
                                                <th class="text-left py-3 px-4 text-sm font-medium text-gray-400">行业平均</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b border-dark-100 hover:bg-dark-200">
                                                <td class="py-3 px-4 text-sm font-medium text-white">AI识别技术</td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">85%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-primary" style="width: 85%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">78%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-secondary" style="width: 78%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">92%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-success" style="width: 92%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">85%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-gray-500" style="width: 85%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="border-b border-dark-100 hover:bg-dark-200">
                                                <td class="py-3 px-4 text-sm font-medium text-white">货道设计</td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">72%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-primary" style="width: 72%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">95%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-secondary" style="width: 95%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">68%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-success" style="width: 68%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">78%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-gray-500" style="width: 78%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="border-b border-dark-100 hover:bg-dark-200">
                                                <td class="py-3 px-4 text-sm font-medium text-white">支付方式</td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">90%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-primary" style="width: 90%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">70%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-secondary" style="width: 70%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">75%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-success" style="width: 75%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="py-3 px-4">
                                                    <div class="flex items-center">
                                                        <span class="text-sm text-white mr-2">78%</span>
                                                        <div class="w-24 h-1.5 bg-dark-200 rounded-full overflow-hidden">
                                                            <div class="h-full bg-gray-500" style="width: 78%"></div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- 优劣势分析 -->
                            <div class="card card-hover p-4 mb-6">
                                <div class="card-header">
                                    <h4 class="card-title">优劣势分析</h4>
                                    <span class="text-xs text-gray-400">以HAHA为基准</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-success mb-2">我方优势</h5>
                                        <ul class="list-disc pl-5 text-gray-400 space-y-1">
                                            <li>系统稳定性高，故障率低于行业平均水平</li>
                                            <li>用户界面设计简洁直观，学习成本低</li>
                                            <li>后台管理系统功能完善，运营效率高</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-danger mb-2">我方不足</h5>
                                        <ul class="list-disc pl-5 text-gray-400 space-y-1">
                                            <li>AI识别技术相对落后，准确率有待提高</li>
                                            <li>货道设计创新性不足，空间利用率不高</li>
                                            <li>支付方式更新较慢，缺乏新兴支付选项</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 优化建议 -->
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h4 class="card-title flex items-center">
                                        <i class="fa fa-lightbulb-o text-warning mr-2"></i>
                                        优化建议
                                    </h4>
                                </div>
                                <div class="bg-dark-200 p-4">
                                    <ol class="list-decimal pl-5 text-gray-400 space-y-2">
                                        <li><strong class="text-white">提升AI识别技术：</strong> 引入深度学习算法，增强动态学习能力，提高识别准确率，特别是在光线不足环境下的表现</li>
                                        <li><strong class="text-white">优化货道设计：</strong> 参考Micromart的高密度货道设计，提高空间利用率，增加商品种类和数量</li>
                                        <li><strong class="text-white">丰富支付方式：</strong> 增加生物识别支付、数字货币支付等新兴支付选项，提升支付便利性</li>
                                        <li><strong class="text-white">强化差异化优势：</strong> 在保持系统稳定性和用户界面优势的基础上，开发独特的增值服务</li>
                                        <li><strong class="text-white">建立持续创新机制：</strong> 定期跟踪竞品动态，建立快速响应机制，保持产品竞争力</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- AI识别技术标签页内容 -->
                        <div class="report-tab hidden" id="ai-tech-tab">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                                <!-- AI技术对比图表 -->
                                <div class="card card-hover p-4">
                                    <div class="card-header">
                                        <h4 class="card-title">AI技术细分对比</h4>
                                        <div class="flex space-x-2">
                                            <button class="px-2 py-1 text-xs bg-primary text-white rounded">全部</button>
                                            <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">自定义</button>
                                        </div>
                                    </div>
                                    <div class="h-64">
                                        <canvas id="ai-tech-chart"></canvas>
                                    </div>
                                </div>

                                <!-- AI技术关键指标 -->
                                <div class="card card-hover p-4">
                                    <div class="card-header">
                                        <h4 class="card-title">关键技术指标</h4>
                                        <span class="text-xs text-gray-400">行业基准对比</span>
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="text-gray-400">识别准确率</span>
                                                <span class="font-medium text-white">85%</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-value" style="width: 85%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs mt-1">
                                                <span class="text-gray-500">行业平均: 82%</span>
                                                <span class="text-success">领先3%</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="text-gray-400">识别速度</span>
                                                <span class="font-medium text-white">80ms</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-value" style="width: 80%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs mt-1">
                                                <span class="text-gray-500">行业平均: 75ms</span>
                                                <span class="text-danger">落后5ms</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="text-gray-400">复杂环境适应</span>
                                                <span class="font-medium text-white">75%</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-value" style="width: 75%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs mt-1">
                                                <span class="text-gray-500">行业平均: 78%</span>
                                                <span class="text-danger">落后3%</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between text-sm mb-1">
                                                <span class="text-gray-400">新商品学习能力</span>
                                                <span class="font-medium text-white">82%</span>
                                            </div>
                                            <div class="progress-bar">
                                                <div class="progress-value" style="width: 82%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs mt-1">
                                                <span class="text-gray-500">行业平均: 76%</span>
                                                <span class="text-success">领先6%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 其他标签页内容 -->
                        <div class="report-tab hidden" id="channel-tab">
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h4 class="card-title">货道设计分析</h4>
                                </div>
                                <p class="text-gray-400">货道设计分析内容将在此显示...</p>
                            </div>
                        </div>

                        <div class="report-tab hidden" id="payment-tab">
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h4 class="card-title">支付方式分析</h4>
                                </div>
                                <p class="text-gray-400">支付方式分析内容将在此显示...</p>
                            </div>
                        </div>

                        <div class="report-tab hidden" id="user-exp-tab">
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h4 class="card-title">用户体验分析</h4>
                                </div>
                                <p class="text-gray-400">用户体验分析内容将在此显示...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 市场洞察部分 -->
                <section id="insights-section" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">市场洞察</h2>
                        <button class="btn-primary flex items-center gap-2" id="generate-insight-btn">
                            <i class="fa fa-refresh"></i>
                            <span>刷新洞察</span>
                        </button>
                    </div>

                    <!-- AI提示词输入区 -->
                    <div class="card card-hover p-4 mb-6">
                        <div class="card-header">
                            <h3 class="card-title flex items-center">
                                <i class="fa fa-magic text-primary mr-2"></i>
                                AI驱动的市场洞察
                            </h3>
                            <span class="text-xs text-gray-400">基于最新市场数据和竞品分析</span>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-400 mb-2">输入您的问题或分析需求</label>
                            <div class="flex gap-2">
                                <input type="text" class="input-field flex-1" placeholder="例如：分析AI零售柜行业未来6个月的技术发展趋势..." id="insight-question-input">
                                <button class="btn-primary flex items-center gap-2" id="generate-insight-button">
                                    <i class="fa fa-paper-plane"></i>
                                    <span>生成洞察</span>
                                </button>
                            </div>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded insight-preset">行业技术趋势</button>
                                <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded insight-preset">消费者行为分析</button>
                                <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded insight-preset">竞品营销策略</button>
                                <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded insight-preset">价格趋势预测</button>
                                <button class="text-xs bg-dark-200 hover:bg-dark-100 px-2 py-1 rounded insight-preset">新兴市场机会</button>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-400 mb-1">AI模型选择</label>
                            <div class="flex items-center gap-3">
                                <select class="input-field flex-1" id="insight-ai-model">
                                    <option value="default">使用系统默认模型</option>
                                    <option value="gpt-4">GPT-4</option>
                                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                    <option value="claude-3">Claude 3</option>
                                    <option value="tongyi-qianwen">通义千问</option>
                                    <option value="wenxin-yiyan">文心一言</option>
                                </select>
                                <button class="btn-secondary text-sm" id="view-insight-model-info">
                                    <i class="fa fa-info-circle mr-1"></i> 模型信息
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 洞察卡片区域 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <!-- 行业趋势洞察 -->
                        <div class="card card-hover p-4">
                            <div class="card-header">
                                <h3 class="card-title">行业趋势洞察</h3>
                                <span class="badge badge-blue">AI生成</span>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="p-2 rounded bg-primary/10 text-primary mr-3 mt-1">
                                        <i class="fa fa-line-chart"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-white mb-1">计算机视觉技术成为主流</h5>
                                        <p class="text-sm text-gray-400">基于计算机视觉的AI识别技术正迅速取代传统的RFID技术，识别准确率提升35%，成本降低28%。预计2024年将有超过70%的新设备采用此技术。</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="p-2 rounded bg-warning/10 text-warning mr-3 mt-1">
                                        <i class="fa fa-bolt"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-white mb-1">边缘计算提升实时性能</h5>
                                        <p class="text-sm text-gray-400">将AI推理能力迁移到设备端的边缘计算方案正成为行业趋势，响应时间从平均1.2秒降至0.3秒，同时降低了云服务依赖和数据传输成本。</p>
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <div class="p-2 rounded bg-success/10 text-success mr-3 mt-1">
                                        <i class="fa fa-users"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-white mb-1">个性化购物体验兴起</h5>
                                        <p class="text-sm text-gray-400">集成人脸识别和购买历史分析的个性化推荐系统正成为高端市场的标配，提升销售额平均达23%，用户满意度提升31%。</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 消费者行为分析 -->
                        <div class="card card-hover p-4">
                            <div class="card-header">
                                <h3 class="card-title">消费者行为分析</h3>
                                <span class="badge badge-blue">AI生成</span>
                            </div>
                            <div class="h-64">
                                <canvas id="consumer-behavior-chart"></canvas>
                            </div>
                            <div class="mt-4">
                                <p class="text-sm text-gray-400">
                                    <strong class="text-white">关键发现：</strong> 数据显示消费者在工作日早晨7-9点和晚上6-8点是购物高峰期，周末则全天较为平均。移动端支付占比达78%，较去年同期增长15%。
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 市场机会分析 -->
                    <div class="card card-hover p-4 mb-6">
                        <div class="card-header">
                            <h3 class="card-title">市场机会分析</h3>
                            <span class="badge badge-green">高价值</span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-dark-200 p-4 rounded">
                                <div class="flex items-center mb-3">
                                    <div class="w-8 h-8 bg-primary/10 flex items-center justify-center text-primary mr-2">
                                        <i class="fa fa-map-marker"></i>
                                    </div>
                                    <h4 class="font-medium text-white">校园市场</h4>
                                </div>
                                <p class="text-sm text-gray-400 mb-3">
                                    高校校园对AI零售柜需求旺盛，特别是24小时运营和多样化支付方式。建议与校方合作推出定制化解决方案。
                                </p>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">市场规模: 25亿</span>
                                    <span class="text-xs text-green-400">增长率: 32%</span>
                                </div>
                            </div>
                            <div class="bg-dark-200 p-4 rounded">
                                <div class="flex items-center mb-3">
                                    <div class="w-8 h-8 bg-secondary/10 flex items-center justify-center text-secondary mr-2">
                                        <i class="fa fa-building"></i>
                                    </div>
                                    <h4 class="font-medium text-white">写字楼场景</h4>
                                </div>
                                <p class="text-sm text-gray-400 mb-3">
                                    高端写字楼对商品品质和购物体验要求较高，可考虑引入高端商品和会员制服务，提升客单价和复购率。
                                </p>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">市场规模: 42亿</span>
                                    <span class="text-xs text-green-400">增长率: 28%</span>
                                </div>
                            </div>
                            <div class="bg-dark-200 p-4 rounded">
                                <div class="flex items-center mb-3">
                                    <div class="w-8 h-8 bg-success/10 flex items-center justify-center text-success mr-2">
                                        <i class="fa fa-car"></i>
                                    </div>
                                    <h4 class="font-medium text-white">加油站便利店</h4>
                                </div>
                                <p class="text-sm text-gray-400 mb-3">
                                    加油站场景具有稳定的客流量和较长的停留时间，适合引入即食食品和汽车相关产品，与传统便利店形成差异化。
                                </p>
                                <div class="flex justify-between items-center">
                                    <span class="text-xs text-gray-500">市场规模: 18亿</span>
                                    <span class="text-xs text-green-400">增长率: 45%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 竞品动态监控 -->
                    <div class="card card-hover p-4">
                        <div class="card-header">
                            <h3 class="card-title">竞品动态监控</h3>
                            <div class="flex space-x-2">
                                <button class="px-2 py-1 text-xs bg-primary text-white rounded">全部</button>
                                <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">产品更新</button>
                                <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded">营销活动</button>
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-start p-3 hover:bg-dark-200 rounded">
                                <div class="w-10 h-10 bg-secondary/10 flex items-center justify-center text-secondary mr-3">
                                    <i class="fa fa-shopping-cart"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium text-white">Micromart发布新一代AI零售柜</h4>
                                        <span class="text-xs text-gray-500">2天前</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-1">
                                        Micromart推出新一代产品，采用双摄像头3D识别技术，识别准确率提升至99.5%，同时引入了智能温控系统，扩大了商品种类范围。
                                    </p>
                                    <div class="flex items-center mt-2">
                                        <span class="badge badge-blue mr-2">产品更新</span>
                                        <button class="text-xs text-primary hover:underline">查看详情</button>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-start p-3 hover:bg-dark-200 rounded">
                                <div class="w-10 h-10 bg-success/10 flex items-center justify-center text-success mr-3">
                                    <i class="fa fa-shopping-cart"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium text-white">365与 major coffee chain合作</h4>
                                        <span class="text-xs text-gray-500">5天前</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-1">
                                        365宣布与国际咖啡连锁品牌合作，在其AI零售柜中引入现磨咖啡服务，结合面部识别技术实现无感支付，提升了单店营收35%。
                                    </p>
                                    <div class="flex items-center mt-2">
                                        <span class="badge badge-green mr-2">战略合作</span>
                                        <button class="text-xs text-primary hover:underline">查看详情</button>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-start p-3 hover:bg-dark-200 rounded">
                                <div class="w-10 h-10 bg-warning/10 flex items-center justify-center text-warning mr-3">
                                    <i class="fa fa-shopping-cart"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium text-white">vendera推出无人零售解决方案</h4>
                                        <span class="text-xs text-gray-500">1周前</span>
                                    </div>
                                    <p class="text-sm text-gray-400 mt-1">
                                        vendera发布全新无人零售解决方案，集成了货架机器人和AI视觉系统，实现了自动补货和库存管理，降低了人力成本60%。
                                    </p>
                                    <div class="flex items-center mt-2">
                                        <span class="badge badge-yellow mr-2">技术创新</span>
                                        <button class="text-xs text-primary hover:underline">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 产品对比部分 -->
                <section id="comparison-section" class="section hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">产品型号对比</h2>
                        <div class="flex gap-3">
                            <button class="btn-secondary flex items-center gap-2" id="clear-comparison-btn">
                                <i class="fa fa-refresh"></i>
                                <span>清空对比</span>
                            </button>
                            <button class="btn-primary flex items-center gap-2" id="ai-analysis-btn">
                                <i class="fa fa-robot"></i>
                                <span>AI智能分析</span>
                            </button>
                            <button class="btn-success flex items-center gap-2" id="brand-analysis-btn">
                                <i class="fa fa-line-chart"></i>
                                <span>品牌对比分析</span>
                            </button>
                            <button class="btn-info flex items-center gap-2" id="import-excel-btn">
                                <i class="fa fa-upload"></i>
                                <span>导入Excel</span>
                            </button>
                        </div>
                    </div>

                    <!-- 产品选择区域 -->
                    <div class="card card-hover p-4 mb-6">
                        <div class="card-header">
                            <h3 class="card-title">选择要对比的产品型号</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- 品牌1产品 -->
                            <div class="space-y-3">
                                <h4 class="font-medium text-primary">HAHA</h4>
                                <div class="space-y-2">
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-primary rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="HAHA" data-model="HA-2000" data-name="HAHA Smart 2000">
                                        <span class="ml-2">Mini 360</span>
                                    </label>
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-primary rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="HAHA" data-model="HA-3000" data-name="HAHA Pro 3000">
                                        <span class="ml-2">Pro 542</span>
                                    </label>
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-primary rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="HAHA" data-model="HA-Mini" data-name="HAHA Mini">
                                        <span class="ml-2">Utrul 1200</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 品牌2产品 -->
                            <div class="space-y-3">
                                <h4 class="font-medium text-secondary">Micromart</h4>
                                <div class="space-y-2">
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-secondary rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="Micromart" data-model="MM-X1" data-name="Micromart X1">
                                        <span class="ml-2">Micromart X1</span>
                                    </label>
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-secondary rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="Micromart" data-model="MM-X2" data-name="Micromart X2 Pro">
                                        <span class="ml-2">Micromart X2 Pro</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 品牌3产品 -->
                            <div class="space-y-3">
                                <h4 class="font-medium text-success">365</h4>
                                <div class="space-y-2">
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-success rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="365" data-model="365-S1" data-name="365 Smart S1">
                                        <span class="ml-2">365 Smart S1</span>
                                    </label>
                                    <label class="flex items-center text-sm">
                                        <input type="checkbox" class="form-checkbox h-4 w-4 text-success rounded bg-dark-200 border-dark-100 product-checkbox" data-brand="365" data-model="365-Premium" data-name="365 Premium">
                                        <span class="ml-2">365 Premium</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 text-sm text-gray-400">
                            <i class="fa fa-info-circle mr-1"></i>
                            <span>最多可选择4个产品进行对比</span>
                        </div>
                    </div>

                    <!-- 对比结果区域 -->
                    <div id="comparison-results" class="hidden">
                        <!-- 参数对比表格 -->
                        <div class="card card-hover p-4 mb-6 overflow-x-auto">
                            <div class="card-header">
                                <h3 class="card-title">详细参数对比</h3>
                                <button class="text-sm text-primary hover:underline" id="export-comparison-btn">
                                    <i class="fa fa-download mr-1"></i> 导出对比表
                                </button>
                            </div>
                            <table class="min-w-full" id="comparison-table">
                                <thead>
                                    <tr class="border-b border-dark-100">
                                        <th class="text-left py-3 px-4 text-sm font-medium text-gray-400 w-1/4">参数</th>
                                        <th class="text-center py-3 px-4 text-sm font-medium text-primary" id="product-col-1">产品1</th>
                                        <th class="text-center py-3 px-4 text-sm font-medium text-secondary" id="product-col-2">产品2</th>
                                        <th class="text-center py-3 px-4 text-sm font-medium text-success" id="product-col-3">产品3</th>
                                        <th class="text-center py-3 px-4 text-sm font-medium text-info" id="product-col-4">产品4</th>
                                    </tr>
                                </thead>
                                <tbody id="comparison-table-body">
                                    <!-- 对比数据将通过JavaScript动态生成 -->
                                </tbody>
                            </table>
                        </div>

                        <!-- 性能对比雷达图 -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h3 class="card-title">性能对比雷达图</h3>
                                    <div class="flex space-x-2">
                                        <button class="px-2 py-1 text-xs bg-primary text-white rounded performance-view" data-view="standard">标准视图</button>
                                        <button class="px-2 py-1 text-xs bg-dark-200 hover:bg-dark-100 rounded performance-view" data-view="normalized">归一化视图</button>
                                    </div>
                                </div>
                                <div class="h-80">
                                    <canvas id="performance-radar-chart"></canvas>
                                </div>
                            </div>
                            
                            <!-- 价格与性能对比 -->
                            <div class="card card-hover p-4">
                                <div class="card-header">
                                    <h3 class="card-title">价格与性能对比</h3>
                                </div>
                                <div class="h-80">
                                    <canvas id="price-performance-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- AI分析结果 -->
                        <div id="ai-analysis-result" class="card card-hover p-4 hidden">
                            <div class="card-header">
                                <h3 class="card-title flex items-center">
                                    <i class="fa fa-robot text-primary mr-2"></i>
                                    AI智能对比分析
                                </h3>
                                <span class="badge badge-blue">AI生成</span>
                            </div>
                            <div id="ai-analysis-content" class="space-y-4">
                                <!-- AI分析内容将通过JavaScript动态生成 -->
                            </div>
                        </div>

                        <!-- 品牌对比分析结果 -->
                        <div id="brand-analysis-result" class="card card-hover p-4 hidden">
                            <div class="card-header">
                                <h3 class="card-title flex items-center">
                                    <i class="fa fa-line-chart text-success mr-2"></i>
                                    HAHA品牌竞争力分析
                                </h3>
                                <span class="badge badge-green">品牌对比</span>
                            </div>
                            <div id="brand-analysis-content" class="space-y-4">
                                <!-- 品牌分析内容将通过JavaScript动态生成 -->
                            </div>
                        </div>

                        <!-- 导入Excel模态框 -->
                        <div id="import-excel-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                            <div class="glass-effect p-6 w-full max-w-4xl rounded-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-white">导入产品数据</h3>
                                    <button class="text-gray-400 hover:text-white" id="close-excel-modal-btn">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- 文件上传区域 -->
                                    <div class="space-y-4">
                                        <div class="p-6 border-2 border-dashed border-dark-100 rounded-lg text-center">
                                            <i class="fa fa-file-excel-o text-4xl text-green-500 mb-3"></i>
                                            <h4 class="font-medium text-white mb-2">上传Excel文件</h4>
                                            <p class="text-sm text-gray-400 mb-4">支持 .xlsx 和 .csv 格式</p>
                                            <input type="file" id="excel-file-input" accept=".xlsx,.csv" class="hidden">
                                            <button class="btn-primary" id="browse-file-btn">浏览文件</button>
                                            <p class="text-xs text-gray-500 mt-2">或拖放文件到此处</p>
                                        </div>
                                        <div id="file-info" class="hidden">
                                            <div class="flex items-center justify-between p-3 bg-dark-300 rounded">
                                                <div class="flex items-center">
                                                    <i class="fa fa-file-excel-o text-green-500 mr-2"></i>
                                                    <span id="file-name" class="text-sm truncate"></span>
                                                </div>
                                                <button class="text-gray-400 hover:text-white" id="remove-file-btn">
                                                    <i class="fa fa-times"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="space-y-2">
                                            <h4 class="font-medium text-white">或</h4>
                                            <button class="btn-secondary w-full" id="use-template-btn">使用模板创建</button>
                                        </div>
                                    </div>
                                    
                                    <!-- 在线表格编辑区域 -->
                                    <div class="space-y-4">
                                        <h4 class="font-medium text-white">在线编辑产品数据</h4>
                                        <div class="bg-dark-300 rounded-lg overflow-hidden">
                                            <div class="overflow-x-auto">
                                                <table class="min-w-full" id="online-table">
                                                    <thead>
                                                        <tr class="bg-dark-200">
                                                            <th class="py-2 px-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">品牌</th>
                                                            <th class="py-2 px-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">型号</th>
                                                            <th class="py-2 px-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">名称</th>
                                                            <th class="py-2 px-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">价格</th>
                                                            <th class="py-2 px-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">操作</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="table-body">
                                                        <!-- 表格内容将通过JavaScript动态生成 -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <button class="btn-secondary" id="add-row-btn">
                                                <i class="fa fa-plus mr-1"></i> 添加行
                                            </button>
                                            <button class="btn-success" id="save-table-btn">
                                                <i class="fa fa-save mr-1"></i> 保存数据
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-end gap-3 mt-6">
                                    <button type="button" class="btn-secondary" id="cancel-import-btn">取消</button>
                                    <button type="button" class="btn-primary" id="confirm-import-btn">确认导入</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 未选择产品时的提示 -->
                    <div id="no-products-selected" class="card card-hover p-4 text-center py-12">
                        <div class="text-6xl text-gray-500 mb-4">
                            <i class="fa fa-balance-scale"></i>
                        </div>
                        <h3 class="text-lg font-semibold text-white mb-2">请选择要对比的产品</h3>
                        <p class="text-gray-400">从上方选择1-4个产品型号进行详细对比分析</p>
                    </div>
                </section>

                <!-- 系统设置部分 -->
                <section id="settings-section" class="section">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-white">系统设置</h2>
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-all">
                            <i class="fa fa-save"></i>
                            <span>保存设置</span>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- 个人信息 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">个人信息</h3>
                            <div class="flex flex-col items-center mb-6">
                                <div class="w-20 h-20 bg-blue-600/20 flex items-center justify-center text-blue-400 mb-4 rounded-full">
                                    <i class="fa fa-user text-2xl"></i>
                                </div>
                                <h4 class="font-medium text-white">产品经理</h4>
                                <p class="text-sm text-blue-400 mb-2">企业版用户</p>
                                <button class="text-sm text-blue-400 hover:underline">更换头像</button>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">姓名</label>
                                    <input type="text" value="张三" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">邮箱</label>
                                    <input type="email" value="zhangsan@example.com" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">职位</label>
                                    <input type="text" value="产品经理" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">公司</label>
                                    <input type="text" value="某某科技有限公司" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                </div>
                            </div>
                        </div>

                        <!-- 系统配置 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">系统配置</h3>
                            <div class="space-y-5">
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">语言</label>
                                    <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                        <option>简体中文</option>
                                        <option>English</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">时区</label>
                                    <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                        <option>中国标准时间 (GMT+8)</option>
                                        <option>格林威治标准时间 (GMT+0)</option>
                                        <option>美国东部时间 (GMT-5)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">数据刷新频率</label>
                                    <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                        <option>手动刷新</option>
                                        <option>每5分钟</option>
                                        <option>每15分钟</option>
                                        <option>每30分钟</option>
                                        <option>每小时</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">图表显示模式</label>
                                    <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                        <option>深色模式</option>
                                        <option>浅色模式</option>
                                    </select>
                                </div>
                                <div class="flex justify-between items-center">
                                    <label class="text-sm font-medium text-gray-400">启用通知</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" value="" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all duration-200 peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>
                                <div class="flex justify-between items-center">
                                    <label class="text-sm font-medium text-gray-400">自动保存分析报告</label>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" value="" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all duration-200 peer-checked:bg-blue-600"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 分析维度配置 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">分析维度配置</h3>
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-400 mb-3">默认分析维度</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <input type="checkbox" checked class="w-4 h-4 bg-white/5 border border-white/10 rounded text-blue-500 focus:ring-blue-500">
                                        <label class="ml-2 text-sm text-white">AI识别技术</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" checked class="w-4 h-4 bg-white/5 border border-white/10 rounded text-blue-500 focus:ring-blue-500">
                                        <label class="ml-2 text-sm text-white">货道设计</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" checked class="w-4 h-4 bg-white/5 border border-white/10 rounded text-blue-500 focus:ring-blue-500">
                                        <label class="ml-2 text-sm text-white">支付方式</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="w-4 h-4 bg-white/5 border border-white/10 rounded text-blue-500 focus:ring-blue-500">
                                        <label class="ml-2 text-sm text-white">用户体验</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="checkbox" class="w-4 h-4 bg-white/5 border border-white/10 rounded text-blue-500 focus:ring-blue-500">
                                        <label class="ml-2 text-sm text-white">成本结构</label>
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <h4 class="text-sm font-medium text-gray-400 mb-3">自定义分析维度</h4>
                                    <div class="flex gap-2">
                                        <input type="text" placeholder="输入自定义维度名称" class="flex-1 px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200 focus:border-blue-500">
                                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center justify-center">
                                            <i class="fa fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <h4 class="text-sm font-medium text-gray-400 mb-3">已添加的自定义维度</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between items-center bg-gray-900 px-3 py-2 rounded-lg hover:bg-gray-800 transition-all duration-200">
                                            <span class="text-sm text-white">能源效率</span>
                                            <button class="text-red-400 hover:text-red-500 transition-all duration-200 p-1 rounded-full hover:bg-red-500/10">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                        <div class="flex justify-between items-center bg-gray-900 px-3 py-2 rounded-lg hover:bg-gray-800 transition-all duration-200">
                                            <span class="text-sm text-white">维护成本</span>
                                            <button class="text-red-400 hover:text-red-500 transition-all duration-200 p-1 rounded-full hover:bg-red-500/10">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 数据管理 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">数据管理</h3>
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-400 mb-3">数据导出</h4>
                                <div class="space-y-3">
                                    <button class="w-full bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg py-2.5 flex items-center justify-center gap-2 text-white transition-all">
                                        <i class="fa fa-download"></i>
                                        <span>导出所有分析报告</span>
                                    </button>
                                    <button class="w-full bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg py-2.5 flex items-center justify-center gap-2 text-white transition-all">
                                        <i class="fa fa-download"></i>
                                        <span>导出竞品数据</span>
                                    </button>
                                    <button class="w-full bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg py-2.5 flex items-center justify-center gap-2 text-white transition-all">
                                        <i class="fa fa-download"></i>
                                        <span>导出图表数据</span>
                                    </button>
                                </div>
                                <div class="mt-6">
                                    <h4 class="text-sm font-medium text-gray-400 mb-3">数据备份</h4>
                                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg py-2.5 flex items-center justify-center gap-2 transition-all mb-4">
                                        <i class="fa fa-database"></i>
                                        <span>立即备份</span>
                                    </button>
                                    <div class="space-y-2">
                                        <div class="flex justify-between items-center">
                                            <span class="text-sm text-gray-400">上次备份时间</span>
                                            <span class="text-sm text-white">2023-07-10 15:30</span>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-400 mb-2">每周自动备份</label>
                                            <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <option>每周日</option>
                                                <option>每周一</option>
                                                <option>每周二</option>
                                                <option>每周三</option>
                                                <option>每周四</option>
                                                <option>每周五</option>
                                                <option>每周六</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI模型配置 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">AI模型配置</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-2">默认AI模型</label>
                                    <select class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>GPT-4</option>
                                        <option>GPT-3.5</option>
                                        <option>Claude 3</option>
                                        <option>Gemini Pro</option>
                                    </select>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-gray-400 mb-3">模型参数配置</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-400 mb-2">温度 (0-2)</label>
                                            <input type="number" value="0.7" step="0.1" min="0" max="2" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-400 mb-2">最大 tokens</label>
                                            <input type="number" value="2000" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-6">
                                    <h4 class="text-sm font-medium text-gray-400 mb-3">API密钥配置</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-400 mb-2">OpenAI API Key</label>
                                            <div class="relative">
                                                <input type="password" value="sk-...XYZ" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </div>
                                            <p class="text-xs text-gray-500 mt-1">用于 GPT-4, GPT-3.5</p>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-400 mb-2">Anthropic API Key</label>
                                            <div class="relative">
                                                <input type="password" value="" class="w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                <button class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </div>
                                            <p class="text-xs text-gray-500 mt-1">用于 Claude 3</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 关于系统 -->
                        <div class="glass-effect-light p-5 rounded-lg">
                            <h3 class="text-lg font-semibold text-white mb-6">关于系统</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-400">系统版本</span>
                                    <span class="text-sm text-white">v1.0.0</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-400">最后更新</span>
                                    <span class="text-sm text-white">2023-07-01</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-400">许可证</span>
                                    <span class="text-sm text-white">企业版</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-400">许可证到期</span>
                                    <span class="text-sm text-white">2024-07-01</span>
                                </div>
                                <div class="mt-6 space-y-3">
                                    <button class="w-full bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg py-2.5 flex items-center justify-center gap-2 text-white transition-all">
                                        <i class="fa fa-refresh"></i>
                                        <span>检查更新</span>
                                    </button>
                                    <button class="w-full bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-lg py-2.5 flex items-center justify-center gap-2 text-white transition-all">
                                        <i class="fa fa-question-circle"></i>
                                        <span>帮助中心</span>
                                    </button>
                                </div>
                                <div class="mt-6 pt-4 border-t border-white/10">
                                    <div class="flex justify-between items-center text-sm">
                                        <button class="text-blue-400 hover:underline">还原到此版本</button>
                                        <button class="text-blue-400 hover:underline">返回最新版本</button>
                                    </div>
                                    <div class="flex justify-end mt-2">
                                        <span class="text-xs text-gray-500">v1.0.0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                                        <option value="ernie-bot">ERNIE Bot</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-400 mb-1">模型参数配置</label>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-xs text-gray-500 mb-1">温度 (0-2)</label>
                                            <input type="number" class="input-field" value="0.7" min="0" max="2" step="0.1">
                                        </div>
                                        <div>
                                            <label class="block text-xs text-gray-500 mb-1">最大 tokens</label>
                                            <input type="number" class="input-field" value="2000" min="100" max="10000" step="100">
                                        </div>
                                    </div>
                                </div>
                                <div class="border-t border-dark-100 pt-3">
                                    <h4 class="text-sm font-medium text-gray-400 mb-2">API密钥配置</h4>
                                    <div id="api-keys-container">
                                        <!-- GPT-4/3.5 配置 -->
                                        <div class="mb-3 p-3 bg-dark-200 rounded">
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-white">OpenAI API Key</label>
                                                <span class="text-xs text-gray-500">用于 GPT-4, GPT-3.5</span>
                                            </div>
                                            <div class="flex gap-2">
                                                <input type="password" class="input-field flex-1" value="••••••••••••••••" placeholder="sk-...">
                                                <button class="btn-secondary">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- Claude 配置 -->
                                        <div class="mb-3 p-3 bg-dark-200 rounded">
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-white">Anthropic API Key</label>
                                                <span class="text-xs text-gray-500">用于 Claude 3</span>
                                            </div>
                                            <div class="flex gap-2">
                                                <input type="password" class="input-field flex-1" placeholder="sk-ant-...">
                                                <button class="btn-secondary">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <!-- 国产模型配置 -->
                                        <div class="mb-3 p-3 bg-dark-200 rounded">
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-white">百度文心一言 API</label>
                                            </div>
                                            <div class="grid grid-cols-2 gap-2 mb-2">
                                                <input type="password" class="input-field" placeholder="API Key">
                                                <input type="password" class="input-field" placeholder="Secret Key">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-2">
                                    <button class="btn-primary w-full flex items-center justify-center gap-2" id="save-ai-settings">
                                        <i class="fa fa-save"></i>
                                        <span>保存AI配置</span>
                                    </button>
                                    <button class="btn-secondary w-full mt-2 flex items-center justify-center gap-2" id="test-ai-connection">
                                        <i class="fa fa-refresh"></i>
                                        <span>测试模型连接</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 关于系统 -->
                        <div class="card card-hover p-4">
                            <div class="card-header">
                                <h3 class="card-title">关于系统</h3>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">系统版本</span>
                                    <span class="text-sm font-medium text-white">v1.0.0</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">最后更新</span>
                                    <span class="text-sm font-medium text-white">2023-07-01</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">许可证</span>
                                    <span class="text-sm font-medium text-white">企业版</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">许可证到期</span>
                                    <span class="text-sm font-medium text-white">2024-07-01</span>
                                </div>
                                <div class="pt-2">
                                    <button class="btn-secondary w-full flex items-center justify-center gap-2">
                                        <i class="fa fa-check-circle"></i>
                                        <span>检查更新</span>
                                    </button>
                                    <button class="btn-secondary w-full mt-2 flex items-center justify-center gap-2">
                                        <i class="fa fa-question-circle"></i>
                                        <span>帮助中心</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <!-- 产品对比相关的JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 产品详细数据
            const productData = {
                'HA-2000': {
                    name: 'HAHA Smart 2000',
                    brand: 'HAHA',
                    price: 12999,
                    color: '#3b82f6',
                    specs: {
                        '屏幕尺寸': '21.5英寸',
                        '识别技术': '双摄像头3D识别',
                        '识别准确率': '99.2%',
                        '货道数量': '24个',
                        '最大容量': '360件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付',
                        '尺寸': '1800×850×650mm',
                        '重量': '280kg',
                        '功率': '350W',
                        '制冷方式': '风冷制冷',
                        '温度范围': '2-10℃',
                        '网络连接': '4G/Wi-Fi/以太网',
                        '操作系统': 'Android 11',
                        'CPU': '四核 1.8GHz',
                        '内存': '4GB',
                        '存储': '64GB',
                        '触摸屏': '电容式多点触控',
                        '摄像头数量': '2个',
                        'AI芯片': '自研NPU芯片',
                        '电池续航': '断电后可工作4小时',
                        '防盗系统': '多重生物识别防盗',
                        '远程管理': '云端管理平台',
                        '故障诊断': 'AI智能诊断',
                        '维护成本': '年均2000元',
                        '使用寿命': '8年',
                        '售后服务': '7×24小时在线支持',
                        '软件更新': '终身免费升级',
                        '数据安全': '端到端加密',
                        '能源效率': '一级能效',
                        '噪音水平': '≤45dB',
                        '安装难度': '简易安装，2小时完成'
                    },
                    performance: {
                        '识别速度': 85,
                        '系统响应': 90,
                        '稳定性': 92,
                        '节能性': 80,
                        '扩展性': 88,
                        '用户体验': 87
                    }
                },
                'HA-3000': {
                    name: 'HAHA Pro 3000',
                    brand: 'HAHA',
                    price: 18999,
                    color: '#3b82f6',
                    specs: {
                        '屏幕尺寸': '27英寸',
                        '识别技术': '三摄像头3D结构光',
                        '识别准确率': '99.5%',
                        '货道数量': '36个',
                        '最大容量': '540件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付、NFC',
                        '尺寸': '1950×950×700mm',
                        '重量': '320kg',
                        '功率': '450W',
                        '制冷方式': '风冷制冷（双系统）',
                        '温度范围': '0-15℃',
                        '网络连接': '5G/Wi-Fi/以太网',
                        '操作系统': 'Android 12',
                        'CPU': '八核 2.2GHz',
                        '内存': '8GB',
                        '存储': '128GB',
                        '触摸屏': 'OLED多点触控屏',
                        '摄像头数量': '3个',
                        'AI芯片': '自研NPU芯片Pro',
                        '电池续航': '断电后可工作6小时',
                        '防盗系统': 'AI视觉+多重生物识别防盗',
                        '远程管理': '企业级云端管理平台',
                        '故障诊断': 'AI智能诊断+预测性维护',
                        '维护成本': '年均2500元',
                        '使用寿命': '10年',
                        '售后服务': '7×24小时在线支持+现场服务',
                        '软件更新': '终身免费升级',
                        '数据安全': '端到端加密+区块链存证',
                        '能源效率': '超一级能效',
                        '噪音水平': '≤40dB',
                        '安装难度': '专业安装，3小时完成'
                    },
                    performance: {
                        '识别速度': 95,
                        '系统响应': 96,
                        '稳定性': 94,
                        '节能性': 78,
                        '扩展性': 92,
                        '用户体验': 93
                    }
                },
                'HA-Mini': {
                    name: 'HAHA Mini',
                    brand: 'HAHA',
                    price: 8999,
                    color: '#3b82f6',
                    specs: {
                        '屏幕尺寸': '15.6英寸',
                        '识别技术': '单摄像头AI识别',
                        '识别准确率': '98.5%',
                        '货道数量': '12个',
                        '最大容量': '180件商品',
                        '支付方式': '微信支付、支付宝',
                        '尺寸': '1600×750×600mm',
                        '重量': '220kg',
                        '功率': '250W',
                        '制冷方式': '直冷制冷',
                        '温度范围': '4-12℃',
                        '网络连接': '4G/Wi-Fi',
                        '操作系统': 'Android 10',
                        'CPU': '四核 1.5GHz',
                        '内存': '2GB',
                        '存储': '32GB',
                        '触摸屏': '电阻式触控屏',
                        '摄像头数量': '1个',
                        'AI芯片': '通用AI处理芯片',
                        '电池续航': '断电后可工作2小时',
                        '防盗系统': '基础电子防盗',
                        '远程管理': '简易远程监控',
                        '故障诊断': '基础故障检测',
                        '维护成本': '年均1500元',
                        '使用寿命': '6年',
                        '售后服务': '5×8小时在线支持',
                        '软件更新': '基础功能免费升级',
                        '数据安全': '基础加密',
                        '能源效率': '二级能效',
                        '噪音水平': '≤50dB',
                        '安装难度': '即插即用，1小时完成'
                    },
                    performance: {
                        '识别速度': 75,
                        '系统响应': 82,
                        '稳定性': 88,
                        '节能性': 90,
                        '扩展性': 76,
                        '用户体验': 80
                    }
                },
                'MM-X1': {
                    name: 'Micromart X1',
                    brand: 'Micromart',
                    price: 11999,
                    color: '#8b5cf6',
                    specs: {
                        '屏幕尺寸': '21.5英寸',
                        '识别技术': '双摄像头3D识别',
                        '识别准确率': '99.0%',
                        '货道数量': '28个',
                        '最大容量': '420件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付',
                        '尺寸': '1850×880×680mm',
                        '重量': '290kg',
                        '功率': '380W',
                        '制冷方式': '风冷制冷',
                        '温度范围': '2-10℃',
                        '网络连接': '4G/Wi-Fi/以太网',
                        '操作系统': 'Linux',
                        'CPU': '四核 2.0GHz',
                        '内存': '4GB',
                        '存储': '64GB',
                        '触摸屏': '电容式触控屏',
                        '摄像头数量': '2个',
                        'AI芯片': '进口AI处理芯片',
                        '电池续航': '断电后可工作3小时',
                        '防盗系统': '电子+摄像头监控',
                        '远程管理': 'Web管理后台',
                        '故障诊断': '远程诊断',
                        '维护成本': '年均2200元',
                        '使用寿命': '7年',
                        '售后服务': '5×8小时在线支持',
                        '软件更新': '年度付费升级',
                        '数据安全': '标准加密',
                        '能源效率': '二级能效',
                        '噪音水平': '≤48dB',
                        '安装难度': '专业安装，2.5小时完成'
                    },
                    performance: {
                        '识别速度': 88,
                        '系统响应': 86,
                        '稳定性': 90,
                        '节能性': 82,
                        '扩展性': 84,
                        '用户体验': 85
                    }
                },
                'MM-X2': {
                    name: 'Micromart X2 Pro',
                    brand: 'Micromart',
                    price: 17999,
                    color: '#8b5cf6',
                    specs: {
                        '屏幕尺寸': '27英寸',
                        '识别技术': '四摄像头3D结构光',
                        '识别准确率': '99.7%',
                        '货道数量': '42个',
                        '最大容量': '630件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付、NFC、银行卡',
                        '尺寸': '2000×1000×720mm',
                        '重量': '350kg',
                        '功率': '500W',
                        '制冷方式': '风冷制冷（双系统）',
                        '温度范围': '-2-15℃',
                        '网络连接': '5G/Wi-Fi/以太网',
                        '操作系统': 'Linux',
                        'CPU': '八核 2.5GHz',
                        '内存': '16GB',
                        '存储': '256GB',
                        '触摸屏': '4K高清触控屏',
                        '摄像头数量': '4个',
                        'AI芯片': '进口高端AI芯片',
                        '电池续航': '断电后可工作8小时',
                        '防盗系统': '多重传感器防盗系统',
                        '远程管理': '企业级管理平台',
                        '故障诊断': '远程诊断+专家系统',
                        '维护成本': '年均3000元',
                        '使用寿命': '9年',
                        '售后服务': '7×24小时在线支持',
                        '软件更新': '年度付费升级',
                        '数据安全': '高级加密标准',
                        '能源效率': '一级能效',
                        '噪音水平': '≤42dB',
                        '安装难度': '专业团队安装，4小时完成'
                    },
                    performance: {
                        '识别速度': 97,
                        '系统响应': 95,
                        '稳定性': 92,
                        '节能性': 76,
                        '扩展性': 94,
                        '用户体验': 91
                    }
                },
                '365-S1': {
                    name: '365 Smart S1',
                    brand: '365',
                    price: 10999,
                    color: '#10b981',
                    specs: {
                        '屏幕尺寸': '21.5英寸',
                        '识别技术': '双摄像头AI识别',
                        '识别准确率': '98.8%',
                        '货道数量': '20个',
                        '最大容量': '300件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付',
                        '尺寸': '1750×820×630mm',
                        '重量': '260kg',
                        '功率': '320W',
                        '制冷方式': '风冷制冷',
                        '温度范围': '2-10℃',
                        '网络连接': '4G/Wi-Fi/以太网',
                        '操作系统': 'Android 11',
                        'CPU': '四核 1.8GHz',
                        '内存': '4GB',
                        '存储': '64GB',
                        '触摸屏': '电容式触控屏',
                        '摄像头数量': '2个',
                        'AI芯片': '通用AI芯片',
                        '电池续航': '断电后可工作3小时',
                        '防盗系统': '电子防盗+密码锁',
                        '远程管理': '基础管理平台',
                        '故障诊断': '人工诊断',
                        '维护成本': '年均1800元',
                        '使用寿命': '6年',
                        '售后服务': '5×8小时在线支持',
                        '软件更新': '基础功能免费升级',
                        '数据安全': '标准加密',
                        '能源效率': '二级能效',
                        '噪音水平': '≤48dB',
                        '安装难度': '专业安装，2小时完成'
                    },
                    performance: {
                        '识别速度': 82,
                        '系统响应': 88,
                        '稳定性': 86,
                        '节能性': 84,
                        '扩展性': 80,
                        '用户体验': 83
                    }
                },
                '365-Premium': {
                    name: '365 Premium',
                    brand: '365',
                    price: 16999,
                    color: '#10b981',
                    specs: {
                        '屏幕尺寸': '24英寸',
                        '识别技术': '三摄像头3D识别',
                        '识别准确率': '99.3%',
                        '货道数量': '32个',
                        '最大容量': '480件商品',
                        '支付方式': '微信支付、支付宝、刷脸支付、NFC',
                        '尺寸': '1900×900×680mm',
                        '重量': '310kg',
                        '功率': '420W',
                        '制冷方式': '风冷制冷（双系统）',
                        '温度范围': '0-15℃',
                        '网络连接': '5G/Wi-Fi/以太网',
                        '操作系统': 'Android 12',
                        'CPU': '六核 2.0GHz',
                        '内存': '8GB',
                        '存储': '128GB',
                        '触摸屏': '2K高清触控屏',
                        '摄像头数量': '3个',
                        'AI芯片': '进口AI芯片',
                        '电池续航': '断电后可工作5小时',
                        '防盗系统': '多重生物识别防盗',
                        '远程管理': '企业级管理平台',
                        '故障诊断': '远程诊断+现场服务',
                        '维护成本': '年均2800元',
                        '使用寿命': '8年',
                        '售后服务': '7×24小时在线支持',
                        '软件更新': '年度付费升级',
                        '数据安全': '高级加密',
                        '能源效率': '一级能效',
                        '噪音水平': '≤45dB',
                        '安装难度': '专业安装，3小时完成'
                    },
                    performance: {
                        '识别速度': 90,
                        '系统响应': 92,
                        '稳定性': 94,
                        '节能性': 80,
                        '扩展性': 88,
                        '用户体验': 90
                    }
                }
            };

            // 对比相关变量
            let selectedProducts = [];
            let performanceChart = null;
            let pricePerformanceChart = null;

            // 初始化产品选择事件
            initProductSelection();
            
            // 初始化按钮事件
            initButtonEvents();

            // 产品选择事件初始化
            function initProductSelection() {
                const checkboxes = document.querySelectorAll('.product-checkbox');
                
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        const model = this.dataset.model;
                        
                        if (this.checked) {
                            // 检查是否超过4个产品
                            if (selectedProducts.length >= 4) {
                                showNotification('最多只能选择4个产品进行对比', 'warning');
                                this.checked = false;
                                return;
                            }
                            
                            // 添加到选中列表
                            if (!selectedProducts.includes(model)) {
                                selectedProducts.push(model);
                            }
                        } else {
                            // 从选中列表移除
                            selectedProducts = selectedProducts.filter(m => m !== model);
                        }
                        
                        // 更新对比显示
                        updateComparisonDisplay();
                    });
                });
            }

            // 按钮事件初始化
            function initButtonEvents() {
                // 清空对比按钮
                document.getElementById('clear-comparison-btn')?.addEventListener('click', function() {
                    // 清空选中状态
                    document.querySelectorAll('.product-checkbox').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    // 清空选中列表
                    selectedProducts = [];
                    
                    // 更新显示
                    updateComparisonDisplay();
                    
                    // 隐藏AI分析结果
                    document.getElementById('ai-analysis-result').classList.add('hidden');
                });

                // AI分析按钮
                document.getElementById('ai-analysis-btn')?.addEventListener('click', function() {
                    if (selectedProducts.length < 2) {
                        showNotification('请至少选择2个产品进行AI分析', 'warning');
                        return;
                    }
                    
                    generateAIAnalysis();
                });

                // 品牌分析按钮
                document.getElementById('brand-analysis-btn')?.addEventListener('click', function() {
                    generateBrandAnalysis();
                });



                // 导出对比表按钮
                document.getElementById('export-comparison-btn')?.addEventListener('click', function() {
                    exportComparisonTable();
                });

                // 性能视图切换按钮
                document.querySelectorAll('.performance-view')?.forEach(button => {
                    button.addEventListener('click', function() {
                        // 更新按钮状态
                        document.querySelectorAll('.performance-view').forEach(btn => {
                            btn.classList.remove('bg-primary', 'text-white');
                            btn.classList.add('bg-dark-200', 'hover:bg-dark-100');
                        });
                        
                        this.classList.remove('bg-dark-200', 'hover:bg-dark-100');
                        this.classList.add('bg-primary', 'text-white');
                        
                        // 更新图表视图
                        updatePerformanceChart(this.dataset.view);
                    });
                });
            }

            // 更新对比显示
            function updateComparisonDisplay() {
                const comparisonResults = document.getElementById('comparison-results');
                const noProductsSelected = document.getElementById('no-products-selected');
                
                if (selectedProducts.length === 0) {
                    comparisonResults.classList.add('hidden');
                    noProductsSelected.classList.remove('hidden');
                    return;
                }
                
                comparisonResults.classList.remove('hidden');
                noProductsSelected.classList.add('hidden');
                
                // 更新表头
                updateTableHeaders();
                
                // 生成对比表格
                generateComparisonTable();
                
                // 更新图表
                updateCharts();
            }

            // 更新表头
            function updateTableHeaders() {
                const colors = ['text-primary', 'text-secondary', 'text-success', 'text-info'];
                
                for (let i = 0; i < 4; i++) {
                    const col = document.getElementById(`product-col-${i+1}`);
                    
                    if (i < selectedProducts.length) {
                        const model = selectedProducts[i];
                        const product = productData[model];
                        
                        col.textContent = product.name;
                        col.className = `text-center py-3 px-4 text-sm font-medium ${colors[i]}`;
                        col.style.display = '';
                    } else {
                        col.style.display = 'none';
                    }
                }
            }

            // 生成对比表格
            function generateComparisonTable() {
                const tbody = document.getElementById('comparison-table-body');
                tbody.innerHTML = '';
                
                // 获取所有参数键
                const allParams = new Set();
                selectedProducts.forEach(model => {
                    const product = productData[model];
                    Object.keys(product.specs).forEach(param => allParams.add(param));
                });
                
                // 转换为数组并排序
                const sortedParams = Array.from(allParams).sort();
                
                // 添加价格行
                const priceRow = document.createElement('tr');
                priceRow.className = 'border-b border-dark-100 bg-dark-200/50';
                
                priceRow.innerHTML = `
                    <td class="py-3 px-4 font-medium">价格</td>
                    ${selectedProducts.map(model => `
                        <td class="text-center py-3 px-4 font-bold">
                            ¥${productData[model].price.toLocaleString()}
                        </td>
                    `).join('')}
                    ${selectedProducts.length < 4 ? `<td class="text-center py-3 px-4" colspan="${4 - selectedProducts.length}"></td>` : ''}
                `;
                
                tbody.appendChild(priceRow);
                
                // 添加品牌行
                const brandRow = document.createElement('tr');
                brandRow.className = 'border-b border-dark-100 bg-dark-200/30';
                
                brandRow.innerHTML = `
                    <td class="py-3 px-4 font-medium">品牌</td>
                    ${selectedProducts.map(model => `
                        <td class="text-center py-3 px-4">
                            <span class="font-medium">${productData[model].brand}</span>
                        </td>
                    `).join('')}
                    ${selectedProducts.length < 4 ? `<td class="text-center py-3 px-4" colspan="${4 - selectedProducts.length}"></td>` : ''}
                `;
                
                tbody.appendChild(brandRow);
                
                // 添加分隔行
                const separatorRow = document.createElement('tr');
                separatorRow.innerHTML = `
                    <td class="py-1 px-4" colspan="5"></td>
                `;
                tbody.appendChild(separatorRow);
                
                // 添加参数行
                sortedParams.forEach(param => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-dark-100 hover:bg-dark-200/30';
                    
                    let rowHTML = `<td class="py-3 px-4">${param}</td>`;
                    
                    selectedProducts.forEach(model => {
                        const product = productData[model];
                        const value = product.specs[param] || '-';
                        
                        // 检查是否为最佳值
                        let isBest = false;
                        if (param === '识别准确率') {
                            const values = selectedProducts.map(m => parseFloat(productData[m].specs[param] || '0'));
                            const maxValue = Math.max(...values);
                            isBest = parseFloat(value) === maxValue;
                        } else if (param === '货道数量' || param === '最大容量') {
                            const values = selectedProducts.map(m => parseInt(productData[m].specs[param] || '0'));
                            const maxValue = Math.max(...values);
                            isBest = parseInt(value) === maxValue;
                        }
                        
                        rowHTML += `<td class="text-center py-3 px-4 ${isBest ? 'text-success font-medium' : ''}">${value}</td>`;
                    });
                    
                    // 添加空列
                    if (selectedProducts.length < 4) {
                        rowHTML += `<td class="text-center py-3 px-4" colspan="${4 - selectedProducts.length}"></td>`;
                    }
                    
                    row.innerHTML = rowHTML;
                    tbody.appendChild(row);
                });
            }

            // 更新图表
            function updateCharts() {
                updatePerformanceChart('standard');
                updatePricePerformanceChart();
            }

            // 更新性能雷达图
            function updatePerformanceChart(viewType) {
                const ctx = document.getElementById('performance-radar-chart');
                
                // 销毁现有图表
                if (performanceChart) {
                    performanceChart.destroy();
                }
                
                // 准备数据
                const datasets = selectedProducts.map((model, index) => {
                    const product = productData[model];
                    const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#06b6d4'];
                    
                    let data = Object.values(product.performance);
                    
                    // 如果是归一化视图，将数据归一化到0-100
                    if (viewType === 'normalized') {
                        const maxValues = {};
                        Object.keys(product.performance).forEach(key => {
                            maxValues[key] = Math.max(...selectedProducts.map(m => productData[m].performance[key]));
                        });
                        
                        data = Object.keys(product.performance).map(key => {
                            return (product.performance[key] / maxValues[key]) * 100;
                        });
                    }
                    
                    return {
                        label: product.name,
                        data: data,
                        backgroundColor: `${colors[index]}20`,
                        borderColor: colors[index],
                        borderWidth: 2,
                        pointBackgroundColor: colors[index],
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: colors[index]
                    };
                });
                
                // 创建图表
                performanceChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: Object.keys(productData[selectedProducts[0]].performance),
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    color: '#374151'
                                },
                                grid: {
                                    color: '#374151'
                                },
                                pointLabels: {
                                    color: '#9ca3af',
                                    font: {
                                        size: 11
                                    }
                                },
                                ticks: {
                                    color: '#6b7280',
                                    backdropColor: 'transparent',
                                    z: 100
                                },
                                suggestedMin: 0,
                                suggestedMax: viewType === 'normalized' ? 100 : 100
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#e5e7eb',
                                    usePointStyle: true,
                                    padding: 20
                                }
                            }
                        }
                    }
                });
            }

            // 更新价格性能对比图
            function updatePricePerformanceChart() {
                const ctx = document.getElementById('price-performance-chart');
                
                // 销毁现有图表
                if (pricePerformanceChart) {
                    pricePerformanceChart.destroy();
                }
                
                // 准备数据
                const data = selectedProducts.map((model, index) => {
                    const product = productData[model];
                    const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#06b6d4'];
                    
                    // 计算综合性能得分
                    const performanceValues = Object.values(product.performance);
                    const avgPerformance = performanceValues.reduce((a, b) => a + b, 0) / performanceValues.length;
                    
                    return {
                        x: product.price,
                        y: avgPerformance,
                        r: 15,
                        model: model,
                        name: product.name,
                        brand: product.brand
                    };
                });
                
                // 创建图表
                pricePerformanceChart = new Chart(ctx, {
                    type: 'bubble',
                    data: {
                        datasets: [{
                            label: '产品性能',
                            data: data,
                            backgroundColor: data.map((item, index) => {
                                const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#06b6d4'];
                                return `${colors[index]}80`;
                            }),
                            borderColor: data.map((item, index) => {
                                const colors = ['#3b82f6', '#8b5cf6', '#10b981', '#06b6d4'];
                                return colors[index];
                            }),
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'linear',
                                position: 'bottom',
                                title: {
                                    display: true,
                                    text: '价格 (¥)',
                                    color: '#9ca3af'
                                },
                                grid: {
                                    color: '#374151'
                                },
                                ticks: {
                                    color: '#9ca3af',
                                    callback: function(value) {
                                        return '¥' + value.toLocaleString();
                                    }
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: '综合性能得分',
                                    color: '#9ca3af'
                                },
                                grid: {
                                    color: '#374151'
                                },
                                ticks: {
                                    color: '#9ca3af'
                                },
                                suggestedMin: 70,
                                suggestedMax: 100
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const data = context.raw;
                                        return [
                                            `${data.name} (${data.brand})`,
                                            `价格: ¥${data.x.toLocaleString()}`,
                                            `综合性能: ${data.y.toFixed(1)}`
                                        ];
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // 生成AI分析
            function generateAIAnalysis() {
                const button = document.getElementById('ai-analysis-btn');
                const originalText = button.innerHTML;
                
                // 显示加载状态
                button.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> 分析中...';
                button.disabled = true;
                
                // 模拟AI分析过程
                setTimeout(() => {
                    const analysisResult = generateMockAIAnalysis();
                    
                    // 显示分析结果
                    displayAIAnalysis(analysisResult);
                    
                    // 恢复按钮状态
                    button.innerHTML = originalText;
                    button.disabled = false;
                    
                    showNotification('AI分析完成', 'success');
                }, 3000);
            }

            // 生成模拟AI分析结果
            function generateMockAIAnalysis() {
                const products = selectedProducts.map(model => productData[model]);
                
                // 计算价格性能比
                const pricePerformanceRatios = products.map(product => {
                    const performanceValues = Object.values(product.performance);
                    const avgPerformance = performanceValues.reduce((a, b) => a + b, 0) / performanceValues.length;
                    return {
                        name: product.name,
                        ratio: avgPerformance / product.price * 1000 // 归一化
                    };
                });
                
                // 按性价比排序
                pricePerformanceRatios.sort((a, b) => b.ratio - a.ratio);
                
                // 找出各性能维度的最佳产品
                const bestInCategory = {};
                Object.keys(products[0].performance).forEach(category => {
                    let bestProduct = products[0];
                    let bestValue = products[0].performance[category];
                    
                    products.forEach(product => {
                        if (product.performance[category] > bestValue) {
                            bestValue = product.performance[category];
                            bestProduct = product;
                        }
                    });
                    
                    bestInCategory[category] = {
                        product: bestProduct,
                        value: bestValue
                    };
                });
                
                // 生成分析结果
                return {
                    summary: `${products.length}款AI智能零售柜产品的综合对比分析显示，${pricePerformanceRatios[0].name}在性价比方面表现最佳，综合性能得分达到${Object.values(products.find(p => p.name === pricePerformanceRatios[0].name).performance).reduce((a, b) => a + b, 0) / 6}分，价格为¥${products.find(p => p.name === pricePerformanceRatios[0].name).price.toLocaleString()}。`,
                    
                    priceAnalysis: `价格区间分析：所选产品价格从¥${Math.min(...products.map(p => p.price)).toLocaleString()}到¥${Math.max(...products.map(p => p.price)).toLocaleString()}不等。高端产品如${products.filter(p => p.price > 15000).map(p => p.name).join('、')}在硬件配置和性能方面具有明显优势，但中端产品如${products.filter(p => p.price <= 15000 && p.price >= 10000).map(p => p.name).join('、')}在性价比方面更具竞争力。`,
                    
                    performanceAnalysis: `性能表现：在识别速度方面，${bestInCategory['识别速度'].product.name}表现最佳，得分${bestInCategory['识别速度'].value}分；系统响应速度方面，${bestInCategory['系统响应'].product.name}领先；稳定性方面，${bestInCategory['稳定性'].product.name}表现最为可靠。`,
                    
                    recommendations: [
                        {
                            scenario: '大型商超应用',
                            recommended: products.sort((a, b) => b.specs['最大容量'] - a.specs['最大容量'])[0].name,
                            reason: '大容量、多货道设计，适合商品种类丰富的场景'
                        },
                        {
                            scenario: '写字楼/办公室',
                            recommended: products.sort((a, b) => a.price - b.price)[0].name,
                            reason: '性价比高，适合中等规模的日常需求'
                        },
                        {
                            scenario: '高端场所',
                            recommended: products.sort((a, b) => b.price - a.price)[0].name,
                            reason: '高性能配置，提供更佳的用户体验和品牌形象'
                        }
                    ],
                    
                    conclusion: '综合来看，不同价位的产品各有优势，建议根据具体应用场景、预算和功能需求选择合适的产品。高端产品适合对性能和体验要求较高的场景，而中端产品则在大多数常规应用中提供更好的性价比。'
                };
            }

            // 显示AI分析结果
            function displayAIAnalysis(analysis) {
                const container = document.getElementById('ai-analysis-result');
                const content = document.getElementById('ai-analysis-content');
                
                content.innerHTML = `
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-primary mb-2">综合评估</h4>
                        <p class="text-gray-300">${analysis.summary}</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="p-4 bg-dark-200 rounded-lg">
                            <h4 class="font-medium text-secondary mb-2">价格分析</h4>
                            <p class="text-gray-300">${analysis.priceAnalysis}</p>
                        </div>
                        
                        <div class="p-4 bg-dark-200 rounded-lg">
                            <h4 class="font-medium text-success mb-2">性能表现</h4>
                            <p class="text-gray-300">${analysis.performanceAnalysis}</p>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-info mb-3">场景化推荐</h4>
                        <div class="space-y-3">
                            ${analysis.recommendations.map(rec => `
                                <div class="flex items-start">
                                    <div class="p-2 rounded bg-primary/10 text-primary mr-3 mt-1">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-white mb-1">${rec.scenario}</h5>
                                        <p class="text-sm text-gray-400">推荐产品：<span class="text-primary font-medium">${rec.recommended}</span></p>
                                        <p class="text-sm text-gray-400">推荐理由：${rec.reason}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-warning mb-2">结论</h4>
                        <p class="text-gray-300">${analysis.conclusion}</p>
                    </div>
                `;
                
                container.classList.remove('hidden');
                
                // 滚动到AI分析结果
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // 生成品牌分析
            function generateBrandAnalysis() {
                const button = document.getElementById('brand-analysis-btn');
                const originalText = button.innerHTML;
                
                // 显示加载状态
                button.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> 分析中...';
                button.disabled = true;
                
                // 模拟AI分析过程
                setTimeout(() => {
                    const analysisResult = generateBrandAnalysisResult();
                    
                    // 显示分析结果
                    displayBrandAnalysis(analysisResult);
                    
                    // 恢复按钮状态
                    button.innerHTML = originalText;
                    button.disabled = false;
                    
                    showNotification('品牌竞争力分析完成', 'success');
                }, 3000);
            }

            // 生成品牌分析结果
            function generateBrandAnalysisResult() {
                // 获取所有产品数据
                const allProducts = Object.values(productData);
                
                // 按品牌分组
                const brands = {
                    'HAHA': allProducts.filter(p => p.brand === 'HAHA'),
                    'Micromart': allProducts.filter(p => p.brand === 'Micromart'),
                    '365': allProducts.filter(p => p.brand === '365')
                };
                
                // 计算品牌平均性能
                const brandPerformance = {};
                Object.keys(brands).forEach(brand => {
                    const products = brands[brand];
                    const performanceScores = {};
                    
                    // 初始化性能指标
                    Object.keys(products[0].performance).forEach(key => {
                        performanceScores[key] = 0;
                    });
                    
                    // 计算平均分
                    products.forEach(product => {
                        Object.keys(product.performance).forEach(key => {
                            performanceScores[key] += product.performance[key];
                        });
                    });
                    
                    // 求平均值
                    Object.keys(performanceScores).forEach(key => {
                        performanceScores[key] = (performanceScores[key] / products.length).toFixed(1);
                    });
                    
                    brandPerformance[brand] = performanceScores;
                });
                
                // 计算价格区间
                const brandPriceRanges = {};
                Object.keys(brands).forEach(brand => {
                    const prices = brands[brand].map(p => p.price);
                    brandPriceRanges[brand] = {
                        min: Math.min(...prices),
                        max: Math.max(...prices),
                        avg: Math.round(prices.reduce((a, b) => a + b, 0) / prices.length)
                    };
                });
                
                // 分析优势和劣势
                const advantages = [
                    {
                        category: '技术创新',
                        details: 'HAHA拥有自研NPU芯片，在AI识别算法和处理能力上具有技术壁垒，特别是在Pro 3000型号上的Pro版本芯片性能领先。'
                    },
                    {
                        category: '软件服务',
                        details: '提供终身免费软件升级服务，相比竞争对手的年度付费升级模式更具成本优势，有利于长期客户关系维护。'
                    },
                    {
                        category: '数据安全',
                        details: '端到端加密技术，Pro版本还支持区块链存证，在数据安全和隐私保护方面处于行业领先水平。'
                    },
                    {
                        category: '售后服务',
                        details: '7×24小时全天候在线支持，响应速度快，解决问题效率高，客户满意度持续领先。'
                    }
                ];
                
                const disadvantages = [
                    {
                        category: '硬件规格',
                        details: '在高端型号上，Micromart X2 Pro的四摄像头配置和更大内存容量（16GB vs 8GB）在硬件规格上具有一定优势。'
                    },
                    {
                        category: '产品多样性',
                        details: '产品线相对竞争对手不够丰富，特别是在超大容量和特殊场景定制化产品方面有待加强。'
                    },
                    {
                        category: '价格竞争力',
                        details: '同等配置下，价格略高于部分竞争对手，在价格敏感市场可能面临一定压力。'
                    },
                    {
                        category: '生态系统',
                        details: '与第三方系统的兼容性和开放性相比Linux系统的竞争对手略显不足，生态建设需要加强。'
                    }
                ];
                
                // 生成市场建议
                const recommendations = [
                    {
                        title: '产品策略优化',
                        content: '建议在保持高端产品线技术领先的同时，考虑推出针对价格敏感市场的性价比优化版本，丰富产品矩阵。'
                    },
                    {
                        title: '技术差异化',
                        content: '进一步强化自研AI芯片的性能优势，开发更多基于AI的增值功能，如智能补货预测、消费者行为分析等。'
                    },
                    {
                        title: '生态系统建设',
                        content: '提高系统开放性，加强与第三方应用和服务的集成，构建更丰富的应用生态，提升用户粘性。'
                    },
                    {
                        title: '成本控制',
                        content: '在保持产品品质的前提下，通过供应链优化和生产效率提升，降低产品成本，增强价格竞争力。'
                    }
                ];
                
                return {
                    marketPosition: {
                        overall: 'HAHA品牌在AI智能零售柜市场处于第一梯队位置，特别是在中高端市场占有率领先，品牌知名度和客户满意度持续提升。',
                        pricePosition: `HAHA产品价格区间为¥${brandPriceRanges.HAHA.min.toLocaleString()}-${brandPriceRanges.HAHA.max.toLocaleString()}，平均价格¥${brandPriceRanges.HAHA.avg.toLocaleString()}，定位中高端市场。`,
                        performancePosition: '在系统响应和稳定性方面表现最佳，平均得分分别为92.7分和91.3分，领先竞争对手。'
                    },
                    advantages: advantages,
                    disadvantages: disadvantages,
                    competitiveLandscape: {
                        micromart: 'Micromart凭借硬件规格优势和Linux系统的稳定性，在企业级市场占有一定份额，是HAHA的主要竞争对手。',
                        '365': '365品牌以性价比为主要卖点，在中小客户市场表现活跃，价格策略灵活，但技术实力和服务能力相对较弱。'
                    },
                    recommendations: recommendations,
                    futureOutlook: '随着AI技术的不断发展和零售数字化转型的加速，HAHA应继续加大在AI算法和芯片技术上的投入，同时优化产品结构，提升成本控制能力，加强生态系统建设，以保持和扩大市场领先优势。'
                };
            }

            // 显示品牌分析结果
            function displayBrandAnalysis(analysis) {
                const container = document.getElementById('brand-analysis-result');
                const content = document.getElementById('brand-analysis-content');
                
                content.innerHTML = `
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-primary mb-2">市场定位分析</h4>
                        <p class="text-gray-300 mb-3">${analysis.marketPosition.overall}</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                            <div class="bg-dark-300 p-3 rounded">
                                <h5 class="text-sm font-medium text-gray-300 mb-2">价格定位</h5>
                                <p class="text-sm text-white">${analysis.marketPosition.pricePosition}</p>
                            </div>
                            <div class="bg-dark-300 p-3 rounded">
                                <h5 class="text-sm font-medium text-gray-300 mb-2">性能定位</h5>
                                <p class="text-sm text-white">${analysis.marketPosition.performancePosition}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- 优势分析 -->
                        <div class="p-4 bg-dark-200 rounded-lg">
                            <h4 class="font-medium text-success mb-3 flex items-center">
                                <i class="fa fa-check-circle mr-2"></i>
                                竞争优势
                            </h4>
                            <div class="space-y-3">
                                ${analysis.advantages.map(adv => `
                                    <div class="bg-dark-300 p-3 rounded">
                                        <h5 class="font-medium text-white mb-1">${adv.category}</h5>
                                        <p class="text-sm text-gray-300">${adv.details}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <!-- 劣势分析 -->
                        <div class="p-4 bg-dark-200 rounded-lg">
                            <h4 class="font-medium text-danger mb-3 flex items-center">
                                <i class="fa fa-exclamation-triangle mr-2"></i>
                                竞争劣势
                            </h4>
                            <div class="space-y-3">
                                ${analysis.disadvantages.map(dis => `
                                    <div class="bg-dark-300 p-3 rounded">
                                        <h5 class="font-medium text-white mb-1">${dis.category}</h5>
                                        <p class="text-sm text-gray-300">${dis.details}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-info mb-3">竞争格局分析</h4>
                        <div class="space-y-4">
                            <div class="bg-dark-300 p-3 rounded">
                                <h5 class="font-medium text-secondary mb-1">Micromart</h5>
                                <p class="text-sm text-gray-300">${analysis.competitiveLandscape.micromart}</p>
                            </div>
                            <div class="bg-dark-300 p-3 rounded">
                                <h5 class="font-medium text-success mb-1">365</h5>
                                <p class="text-sm text-gray-300">${analysis.competitiveLandscape['365']}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-warning mb-3">战略建议</h4>
                        <div class="space-y-3">
                            ${analysis.recommendations.map(rec => `
                                <div class="flex items-start">
                                    <div class="p-2 rounded bg-primary/10 text-primary mr-3 mt-1">
                                        <i class="fa fa-lightbulb-o"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-white mb-1">${rec.title}</h5>
                                        <p class="text-sm text-gray-300">${rec.content}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="p-4 bg-dark-200 rounded-lg">
                        <h4 class="font-medium text-primary mb-2">未来展望</h4>
                        <p class="text-gray-300">${analysis.futureOutlook}</p>
                    </div>
                `;
                
                container.classList.remove('hidden');
                
                // 滚动到品牌分析结果
                container.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }

            // 导出对比表
            function exportComparisonTable() {
                // 创建表格数据
                let csvContent = "data:text/csv;charset=utf-8,";
                
                // 添加表头
                csvContent += "参数," + selectedProducts.map(model => productData[model].name).join(",") + "\n";
                
                // 添加价格行
                csvContent += "价格," + selectedProducts.map(model => "¥" + productData[model].price.toLocaleString()).join(",") + "\n";
                
                // 添加品牌行
                csvContent += "品牌," + selectedProducts.map(model => productData[model].brand).join(",") + "\n";
                
                // 获取所有参数键
                const allParams = new Set();
                selectedProducts.forEach(model => {
                    const product = productData[model];
                    Object.keys(product.specs).forEach(param => allParams.add(param));
                });
                
                // 添加参数行
                Array.from(allParams).sort().forEach(param => {
                    csvContent += param + "," + selectedProducts.map(model => productData[model].specs[param] || '-').join(",") + "\n";
                });
                
                // 创建下载链接
                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "产品对比表.csv");
                document.body.appendChild(link);
                
                // 触发下载
                link.click();
                
                // 清理
                document.body.removeChild(link);
                
                showNotification('对比表导出成功', 'success');
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 粒子背景动画
            initParticleBackground();
            
            // 导航切换
            const navItems = document.querySelectorAll('.nav-item, .md\\:hidden a');
            const sections = document.querySelectorAll('.section');
            const pageTitle = document.getElementById('page-title');

            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    
                    // 更新导航状态
                    navItems.forEach(nav => {
                        if (nav.getAttribute('data-section') === targetSection) {
                            nav.classList.add('nav-item-active');
                            if (nav.classList.contains('md:hidden')) {
                                nav.classList.add('text-primary');
                                nav.classList.remove('text-gray-400');
                            }
                        } else {
                            nav.classList.remove('nav-item-active');
                            if (nav.classList.contains('md:hidden')) {
                                nav.classList.remove('text-primary');
                                nav.classList.add('text-gray-400');
                            }
                        }
                    });
                    
                    // 更新页面标题
                    pageTitle.textContent = this.querySelector('span').textContent;
                    
                    // 显示对应部分
                    sections.forEach(section => {
                        if (section.id === targetSection + '-section') {
                            section.classList.remove('hidden');
                            section.classList.add('active');
                        } else {
                            section.classList.add('hidden');
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // 移动端菜单
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const sidebar = document.querySelector('aside');

            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', function() {
                    sidebar.classList.toggle('hidden');
                    sidebar.classList.toggle('fixed');
                    sidebar.classList.toggle('z-20');
                    sidebar.classList.toggle('inset-y-0');
                    sidebar.classList.toggle('left-0');
                    sidebar.classList.toggle('w-64');
                });
            }

            // 竞品管理 - 添加竞品模态框
            const addCompetitorBtn = document.getElementById('add-competitor-btn');
            const addCompetitorModal = document.getElementById('add-competitor-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const cancelAddBtn = document.getElementById('cancel-add-btn');
            const startAnalysisBtn = document.getElementById('start-analysis-btn');
            const analysisProgressModal = document.getElementById('analysis-progress-modal');
            const progressValue = document.getElementById('progress-value');
            const progressText = document.getElementById('progress-text');
            const cancelAnalysisBtn = document.getElementById('cancel-analysis-btn');

            if (addCompetitorBtn && addCompetitorModal) {
                addCompetitorBtn.addEventListener('click', function() {
                    addCompetitorModal.classList.remove('hidden');
                });
            }

            if (closeModalBtn && addCompetitorModal) {
                closeModalBtn.addEventListener('click', function() {
                    addCompetitorModal.classList.add('hidden');
                });
            }

            if (cancelAddBtn && addCompetitorModal) {
                cancelAddBtn.addEventListener('click', function() {
                    addCompetitorModal.classList.add('hidden');
                });
            }

            if (startAnalysisBtn && addCompetitorModal && analysisProgressModal) {
                startAnalysisBtn.addEventListener('click', function() {
                    addCompetitorModal.classList.add('hidden');
                    analysisProgressModal.classList.remove('hidden');
                    
                    // 模拟分析进度
                    let progress = 0;
                    const progressSteps = [
                        '正在初始化...',
                        '正在爬取网站数据...',
                        '正在分析AI识别技术...',
                        '正在分析货道设计...',
                        '正在分析支付方式...',
                        '正在生成分析报告...',
                        '分析完成！'
                    ];
                    
                    const interval = setInterval(function() {
                        progress += 5;
                        progressValue.style.width = progress + '%';
                        
                        const stepIndex = Math.min(Math.floor(progress / 15), progressSteps.length - 1);
                        progressText.textContent = progressSteps[stepIndex];
                        
                        if (progress >= 100) {
                            clearInterval(interval);
                            setTimeout(function() {
                                analysisProgressModal.classList.add('hidden');
                                // 这里可以添加跳转到分析报告页面的逻辑
                                alert('竞品分析完成！');
                            }, 1000);
                        }
                    }, 200);
                    
                    // 启用取消按钮
                    cancelAnalysisBtn.disabled = false;
                    cancelAnalysisBtn.addEventListener('click', function() {
                        clearInterval(interval);
                        analysisProgressModal.classList.add('hidden');
                    });
                });
            }

            // 分析报告 - 生成报告模态框
            const generateReportBtn = document.getElementById('generate-report-btn');
            const generateReportModal = document.getElementById('generate-report-modal');
            const closeReportModalBtn = document.getElementById('close-report-modal-btn');
            const cancelReportBtn = document.getElementById('cancel-report-btn');
            const confirmGenerateBtn = document.getElementById('confirm-generate-btn');

            if (generateReportBtn && generateReportModal) {
                generateReportBtn.addEventListener('click', function() {
                    generateReportModal.classList.remove('hidden');
                });
            }

            if (closeReportModalBtn && generateReportModal) {
                closeReportModalBtn.addEventListener('click', function() {
                    generateReportModal.classList.add('hidden');
                });
            }

            if (cancelReportBtn && generateReportModal) {
                cancelReportBtn.addEventListener('click', function() {
                    generateReportModal.classList.add('hidden');
                });
            }

            if (confirmGenerateBtn && generateReportModal) {
                confirmGenerateBtn.addEventListener('click', function() {
                    generateReportModal.classList.add('hidden');
                    alert('报告生成功能将在连接AI分析API后可用');
                });
            }

            // 报告标签页切换
            const reportTabs = document.querySelectorAll('.tab');
            const reportTabContents = document.querySelectorAll('.report-tab');
            
            reportTabs.forEach((tab, index) => {
                tab.addEventListener('click', function() {
                    reportTabs.forEach(t => t.classList.remove('tab-active'));
                    this.classList.add('tab-active');
                    
                    reportTabContents.forEach(content => content.classList.add('hidden'));
                    reportTabContents[index].classList.remove('hidden');
                });
            });

            // 下拉菜单
            const dropdownButtons = document.querySelectorAll('.dropdown button');
            
            dropdownButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const dropdownMenu = this.nextElementSibling;
                    if (dropdownMenu && dropdownMenu.classList.contains('dropdown-menu')) {
                        dropdownMenu.classList.toggle('hidden');
                    }
                });
            });

            // 点击其他地方关闭下拉菜单
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.dropdown')) {
                    const dropdownMenus = document.querySelectorAll('.dropdown-menu');
                    dropdownMenus.forEach(menu => {
                        menu.classList.add('hidden');
                    });
                }
            });

            // 初始化图表
            initCharts();
        });

        // 粒子背景动画
        function initParticleBackground() {
            const canvas = document.createElement('canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            document.getElementById('particleBackground').appendChild(canvas);

            const ctx = canvas.getContext('2d');
            const particles = [];
            const particleCount = 100;

            // 创建粒子
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 2 + 1,
                    color: `rgba(${Math.floor(Math.random()*80+180)}, ${Math.floor(Math.random()*80+180)}, ${Math.floor(Math.random()*80+180)}, 0.5)`,
                    speedX: Math.random() * 0.5 - 0.25,
                    speedY: Math.random() * 0.5 - 0.25
                });
            }

            // 鼠标位置追踪
            let mouseX = 0, mouseY = 0;
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            // 动画循环
            function animate() {
                requestAnimationFrame(animate);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            
                particles.forEach(p => {
                    // 更新位置
                    p.x += p.speedX;
                    p.y += p.speedY;
                
                    // 边界检查
                    if (p.x > canvas.width) p.x = 0;
                    if (p.x < 0) p.x = canvas.width;
                    if (p.y > canvas.height) p.y = 0;
                    if (p.y < 0) p.y = canvas.height;
                
                    // 鼠标交互 - 靠近鼠标的粒子微微偏移
                    const dx = p.x - mouseX;
                    const dy = p.y - mouseY;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 100) {
                        p.x += dx * 0.01;
                        p.y += dy * 0.01;
                    }
                
                    // 绘制粒子
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();
                });
            
                // 连接临近粒子
                connectParticles();
            }

            // 连接临近的粒子
            function connectParticles() {
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                    
                        if (dist < 120) {
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(200, 200, 255, ${0.2 * (1 - dist/120)})`;
                            ctx.lineWidth = 0.5;
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
            }

            // 启动动画
            animate();

            // 响应窗口大小变化
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        // 初始化图表
        function initCharts() {
            // 技术对比图表
            const techComparisonCtx = document.getElementById('tech-comparison-chart');
            if (techComparisonCtx) {
                new Chart(techComparisonCtx, {
                    type: 'bar',
                    data: {
                        labels: ['AI识别准确率', '商品识别速度', '货道容量', '支付方式'],
                        datasets: [
                            {
                                label: 'HAHA',
                                data: [85, 80, 75, 80],
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Micromart',
                                data: [78, 95, 95, 70],
                                backgroundColor: 'rgba(139, 92, 246, 0.7)',
                                borderColor: 'rgba(139, 92, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '365',
                                data: [92, 90, 85, 90],
                                backgroundColor: 'rgba(16, 185, 129, 0.7)',
                                borderColor: 'rgba(16, 185, 129, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }

            // 市场占有率图表
            const marketShareCtx = document.getElementById('market-share-chart');
            if (marketShareCtx) {
                new Chart(marketShareCtx, {
                    type: 'pie',
                    data: {
                        labels: ['HAHA', 'Micromart', '365', 'vendera', 'sandstar', '其他'],
                        datasets: [{
                            data: [25, 20, 18, 15, 12, 10],
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(16, 185, 129, 0.7)',
                                'rgba(245, 158, 11, 0.7)',
                                'rgba(239, 68, 68, 0.7)',
                                'rgba(107, 114, 128, 0.7)'
                            ],
                            borderColor: [
                                'rgba(59, 130, 246, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(239, 68, 68, 1)',
                                'rgba(107, 114, 128, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }

            // 行业趋势图表
            const industryTrendsCtx = document.getElementById('industry-trends-chart');
            if (industryTrendsCtx) {
                new Chart(industryTrendsCtx, {
                    type: 'line',
                    data: {
                        labels: ['2020 Q1', '2020 Q2', '2020 Q3', '2020 Q4', '2021 Q1', '2021 Q2', '2021 Q3', '2021 Q4', '2022 Q1', '2022 Q2', '2022 Q3', '2022 Q4', '2023 Q1', '2023 Q2'],
                        datasets: [
                            {
                                label: 'AI识别技术',
                                data: [65, 68, 72, 75, 78, 80, 82, 85, 87, 88, 90, 91, 92, 93],
                                borderColor: 'rgba(59, 130, 246, 1)',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                fill: true,
                                tension: 0.4
                            },
                            {
                                label: '市场规模（亿元）',
                                data: [15, 18, 22, 25, 30, 35, 42, 48, 55, 62, 70, 78, 85, 92],
                                borderColor: 'rgba(139, 92, 246, 1)',
                                backgroundColor: 'rgba(139, 92, 246, 0.1)',
                                fill: true,
                                tension: 0.4,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 60,
                                max: 100,
                                title: {
                                    display: true,
                                    text: '技术成熟度（%）',
                                    color: 'rgba(255, 255, 255, 0.7)'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            y1: {
                                beginAtZero: true,
                                position: 'right',
                                grid: {
                                    drawOnChartArea: false
                                },
                                title: {
                                    display: true,
                                    text: '市场规模（亿元）',
                                    color: 'rgba(255, 255, 255, 0.7)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }

            // 雷达图对比
            const radarComparisonCtx = document.getElementById('radar-comparison-chart');
            if (radarComparisonCtx) {
                new Chart(radarComparisonCtx, {
                    type: 'radar',
                    data: {
                        labels: ['AI识别技术', '货道设计', '支付方式', '用户体验', '成本效益', '运营效率'],
                        datasets: [
                            {
                                label: 'HAHA',
                                data: [85, 72, 90, 82, 78, 85],
                                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                            },
                            {
                                label: 'Micromart',
                                data: [78, 85, 82, 88, 80, 75],
                                backgroundColor: 'rgba(139, 92, 246, 0.2)',
                                borderColor: 'rgba(139, 92, 246, 1)',
                                pointBackgroundColor: 'rgba(139, 92, 246, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(139, 92, 246, 1)'
                            },
                            {
                                label: '365',
                                data: [92, 68, 75, 80, 85, 82],
                                backgroundColor: 'rgba(16, 185, 129, 0.2)',
                                borderColor: 'rgba(16, 185, 129, 1)',
                                pointBackgroundColor: 'rgba(16, 185, 129, 1)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgba(16, 185, 129, 1)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: {
                                    display: true,
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                pointLabels: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    font: {
                                        size: 12
                                    }
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    backdropColor: 'transparent'
                                },
                                suggestedMin: 60,
                                suggestedMax: 100
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }

            // AI技术图表（在AI识别技术标签页中）
            const aiTechCtx = document.getElementById('ai-tech-chart');
            if (aiTechCtx) {
                new Chart(aiTechCtx, {
                    type: 'bar',
                    data: {
                        labels: ['识别准确率', '识别速度', '遮挡识别', '新商品学习', '光线适应', '成本效益'],
                        datasets: [
                            {
                                label: '365',
                                data: [92, 90, 85, 95, 88, 80],
                                backgroundColor: 'rgba(16, 185, 129, 0.7)',
                                borderColor: 'rgba(16, 185, 129, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Micromart',
                                data: [78, 95, 80, 75, 85, 88],
                                backgroundColor: 'rgba(139, 92, 246, 0.7)',
                                borderColor: 'rgba(139, 92, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'HAHA',
                                data: [85, 80, 88, 82, 75, 85],
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }

            // Excel导入相关功能
            function initExcelImportEvents() {
                // 导入Excel按钮
                document.getElementById('import-excel-btn').addEventListener('click', function() {
                    document.getElementById('import-excel-modal').classList.remove('hidden');
                    loadExistingDataToTable();
                });

                // 关闭模态框按钮
                document.getElementById('close-excel-modal-btn').addEventListener('click', closeExcelModal);
                document.getElementById('cancel-import-btn').addEventListener('click', closeExcelModal);

                // 浏览文件按钮
                document.getElementById('browse-file-btn').addEventListener('click', function() {
                    document.getElementById('excel-file-input').click();
                });

                // 文件输入变化
                document.getElementById('excel-file-input').addEventListener('change', handleFileSelect);

                // 移除文件按钮
                document.getElementById('remove-file-btn').addEventListener('click', removeSelectedFile);

                // 添加行按钮
                document.getElementById('add-row-btn').addEventListener('click', addNewRow);

                // 保存表格数据按钮
                document.getElementById('save-table-btn').addEventListener('click', saveTableData);

                // 使用模板创建按钮
                document.getElementById('use-template-btn').addEventListener('click', generateTemplate);

                // 确认导入按钮
                document.getElementById('confirm-import-btn').addEventListener('click', confirmImport);

                // 设置拖放区域
                setupDragAndDrop();
            }

            // 处理文件选择
            function handleFileSelect(event) {
                const file = event.target.files[0];
                if (file) {
                    if (file.name.endsWith('.xlsx') || file.name.endsWith('.csv')) {
                        document.getElementById('file-name').textContent = file.name;
                        document.getElementById('file-info').classList.remove('hidden');
                        
                        // 解析Excel文件
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            try {
                                const data = new Uint8Array(e.target.result);
                                const workbook = XLSX.read(data, { type: 'array' });
                                const firstSheetName = workbook.SheetNames[0];
                                const worksheet = workbook.Sheets[firstSheetName];
                                const jsonData = XLSX.utils.sheet_to_json(worksheet);
                                
                                // 显示数据到表格
                                displayDataInTable(jsonData);
                                
                            } catch (error) {
                                showNotification('文件解析失败，请检查文件格式', 'error');
                                console.error('Excel解析错误:', error);
                            }
                        };
                        reader.readAsArrayBuffer(file);
                    } else {
                        showNotification('请选择.xlsx或.csv格式的文件', 'warning');
                        event.target.value = '';
                    }
                }
            }

            // 显示数据到表格
            function displayDataInTable(data) {
                const tbody = document.getElementById('table-body');
                tbody.innerHTML = '';
                
                data.forEach((row, index) => {
                    const tr = document.createElement('tr');
                    tr.className = 'border-b border-dark-100 hover:bg-dark-200';
                    
                    tr.innerHTML = `
                        <td class="py-2 px-3">
                            <input type="text" value="${row.brand || ''}" class="input-field text-sm" placeholder="品牌" data-field="brand">
                        </td>
                        <td class="py-2 px-3">
                            <input type="text" value="${row.model || ''}" class="input-field text-sm" placeholder="型号" data-field="model">
                        </td>
                        <td class="py-2 px-3">
                            <input type="text" value="${row.name || ''}" class="input-field text-sm" placeholder="产品名称" data-field="name">
                        </td>
                        <td class="py-2 px-3">
                            <input type="number" value="${row.price || ''}" class="input-field text-sm" placeholder="价格" data-field="price">
                        </td>
                        <td class="py-2 px-3">
                            <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${index}">
                                <i class="fa fa-trash"></i>
                            </button>
                        </td>
                    `;
                    
                    tbody.appendChild(tr);
                });
                
                // 添加删除行事件
                document.querySelectorAll('.delete-row-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        this.closest('tr').remove();
                    });
                });
            }

            // 加载现有数据到表格
            function loadExistingDataToTable() {
                const existingData = Object.values(productData).map(product => ({
                    brand: product.brand,
                    model: product.id || Object.keys(productData).find(key => productData[key] === product),
                    name: product.name,
                    price: product.price
                }));
                
                displayDataInTable(existingData);
            }

            // 添加新行
            function addNewRow() {
                const tbody = document.getElementById('table-body');
                const rowIndex = tbody.children.length;
                
                const tr = document.createElement('tr');
                tr.className = 'border-b border-dark-100 hover:bg-dark-200';
                
                tr.innerHTML = `
                    <td class="py-2 px-3">
                        <input type="text" class="input-field text-sm" placeholder="品牌" data-field="brand">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" class="input-field text-sm" placeholder="型号" data-field="model">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" class="input-field text-sm" placeholder="产品名称" data-field="name">
                    </td>
                    <td class="py-2 px-3">
                        <input type="number" class="input-field text-sm" placeholder="价格" data-field="price">
                    </td>
                    <td class="py-2 px-3">
                        <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${rowIndex}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tbody.appendChild(tr);
                
                // 添加删除行事件
                tr.querySelector('.delete-row-btn').addEventListener('click', function() {
                    tr.remove();
                });
            }

            // 保存表格数据
            function saveTableData() {
                const rows = document.querySelectorAll('#table-body tr');
                const tableData = [];
                
                rows.forEach(row => {
                    const rowData = {};
                    const inputs = row.querySelectorAll('input');
                    
                    inputs.forEach(input => {
                        const field = input.dataset.field;
                        const value = input.value.trim();
                        
                        if (field && value) {
                            rowData[field] = field === 'price' ? parseFloat(value) : value;
                        }
                    });
                    
                    if (Object.keys(rowData).length > 0) {
                        tableData.push(rowData);
                    }
                });
                
                if (tableData.length === 0) {
                    showNotification('表格中没有有效数据', 'warning');
                    return;
                }
                
                // 验证必填字段
                const invalidRows = tableData.filter(row => !row.brand || !row.model || !row.name || !row.price);
                if (invalidRows.length > 0) {
                    showNotification('请填写所有必填字段（品牌、型号、名称、价格）', 'warning');
                    return;
                }
                
                showNotification('数据保存成功', 'success');
                return tableData;
            }

            // 确认导入
            function confirmImport() {
                const tableData = saveTableData();
                if (!tableData) return;
                
                // 处理导入的数据
                const importedProducts = {};
                
                tableData.forEach(row => {
                    // 检查是否已存在该型号
                    if (productData[row.model]) {
                        // 更新现有产品
                        importedProducts[row.model] = {
                            ...productData[row.model],
                            brand: row.brand,
                            name: row.name,
                            price: row.price
                        };
                    } else {
                        // 创建新产品
                        importedProducts[row.model] = {
                            name: row.name,
                            brand: row.brand,
                            price: row.price,
                            color: getBrandColor(row.brand),
                            specs: {
                                '屏幕尺寸': '未指定',
                                '识别技术': '未指定',
                                '识别准确率': '未指定',
                                '货道数量': '未指定',
                                '最大容量': '未指定',
                                '支付方式': '未指定',
                                '尺寸': '未指定',
                                '重量': '未指定',
                                '功率': '未指定',
                                '制冷方式': '未指定',
                                '温度范围': '未指定',
                                '网络连接': '未指定',
                                '操作系统': '未指定',
                                'CPU': '未指定',
                                '内存': '未指定',
                                '存储': '未指定',
                                '触摸屏': '未指定',
                                '摄像头数量': '未指定',
                                'AI芯片': '未指定',
                                '电池续航': '未指定',
                                '防盗系统': '未指定',
                                '远程管理': '未指定',
                                '故障诊断': '未指定',
                                '维护成本': '未指定',
                                '使用寿命': '未指定',
                                '售后服务': '未指定',
                                '软件更新': '未指定',
                                '数据安全': '未指定',
                                '能源效率': '未指定',
                                '噪音水平': '未指定',
                                '安装难度': '未指定'
                            },
                            performance: {
                                '识别速度': 80,
                                '系统响应': 80,
                                '稳定性': 80,
                                '节能性': 80,
                                '扩展性': 80,
                                '用户体验': 80
                            }
                        };
                    }
                });
                
                // 合并数据
                Object.assign(productData, importedProducts);
                
                // 更新产品选择列表
                updateProductSelectionList();
                
                // 关闭模态框
                closeExcelModal();
                
                // 显示成功消息
                showNotification(`成功导入 ${tableData.length} 个产品`, 'success');
            }

            // 获取品牌颜色
            function getBrandColor(brand) {
                const brandColors = {
                    'HAHA': '#3b82f6',
                    'Micromart': '#8b5cf6',
                    '365': '#10b981'
                };
                
                return brandColors[brand] || '#6b7280';
            }

            // 更新产品选择列表
            function updateProductSelectionList() {
                // 按品牌分组产品
                const brands = {};
                Object.keys(productData).forEach(model => {
                    const product = productData[model];
                    if (!brands[product.brand]) {
                        brands[product.brand] = [];
                    }
                    brands[product.brand].push({ model, ...product });
                });
                
                // 更新选择区域
                const selectionArea = document.querySelector('#comparison-section .grid.grid-cols-1.md\\:grid-cols-3');
                selectionArea.innerHTML = '';
                
                // 为每个品牌创建选择区域
                Object.keys(brands).forEach(brand => {
                    const brandProducts = brands[brand];
                    const brandColor = getBrandColor(brand);
                    
                    const brandSection = document.createElement('div');
                    brandSection.className = 'space-y-3';
                    brandSection.innerHTML = `
                        <h4 class="font-medium" style="color: ${brandColor}">${brand}</h4>
                        <div class="space-y-2">
                            ${brandProducts.map(product => `
                                <label class="flex items-center text-sm">
                                    <input type="checkbox" class="form-checkbox h-4 w-4 rounded bg-dark-200 border-dark-100 product-checkbox" 
                                           data-brand="${product.brand}" data-model="${product.model}" data-name="${product.name}"
                                           style="color: ${brandColor}">
                                    <span class="ml-2">${product.name}</span>
                                </label>
                            `).join('')}
                        </div>
                    `;
                    
                    selectionArea.appendChild(brandSection);
                });
                
                // 重新绑定产品选择事件
                document.querySelectorAll('.product-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', handleProductSelection);
                });
            }

            // 生成模板
            function generateTemplate() {
                const templateData = [
                    { brand: 'HAHA', model: 'NEW-100', name: '新产品100', price: 12999 },
                    { brand: 'Competitor', model: 'COMP-200', name: '竞争产品200', price: 11999 }
                ];
                
                displayDataInTable(templateData);
                showNotification('模板已生成，请编辑表格数据', 'info');
            }

            // 移除选中的文件
            function removeSelectedFile() {
                document.getElementById('excel-file-input').value = '';
                document.getElementById('file-info').classList.add('hidden');
            }

            // 设置拖放区域
            function setupDragAndDrop() {
                const dropArea = document.querySelector('.border-dashed');
                
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropArea.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropArea.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight() {
                    dropArea.classList.add('border-primary');
                }
                
                function unhighlight() {
                    dropArea.classList.remove('border-primary');
                }
                
                dropArea.addEventListener('drop', handleDrop, false);
                
                function handleDrop(e) {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    
                    if (files.length > 0) {
                        const fileInput = document.getElementById('excel-file-input');
                        fileInput.files = files;
                        
                        // 触发change事件
                        const event = new Event('change');
                        fileInput.dispatchEvent(event);
                    }
                }
            }

            // 关闭Excel模态框
            function closeExcelModal() {
                document.getElementById('import-excel-modal').classList.add('hidden');
                // 重置文件输入
                document.getElementById('excel-file-input').value = '';
                document.getElementById('file-info').classList.add('hidden');
            }
        }

        // 认证相关功能
        function initAuth() {
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');
            const logoutLink = document.getElementById('logout-link');
            
            // 切换用户菜单
            if (userMenuButton && userMenu) {
                userMenuButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userMenu.classList.toggle('hidden');
                });
                
                // 点击其他地方关闭菜单
                document.addEventListener('click', function() {
                    userMenu.classList.add('hidden');
                });
            }
            
            // 退出登录
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    logout();
                });
            }
            
            // 更新用户界面
            updateUserUI();
        }

        // 更新用户界面
        function updateUserUI() {
            const user = API.utils.getCurrentUser();
            const userName = document.getElementById('user-name');
            const menuUserName = document.getElementById('menu-user-name');
            const menuUserEmail = document.getElementById('menu-user-email');
            const authButtons = document.getElementById('auth-buttons');
            const logoutButtons = document.getElementById('logout-buttons');
            const profileLink = document.getElementById('profile-link');
            const adminLink = document.getElementById('admin-link');
            
            if (user) {
                if (userName) userName.textContent = user.username;
                if (menuUserName) menuUserName.textContent = user.username;
                if (menuUserEmail) menuUserEmail.textContent = user.email;
                if (authButtons) authButtons.classList.add('hidden');
                if (logoutButtons) logoutButtons.classList.remove('hidden');
                if (profileLink) profileLink.classList.remove('hidden');
                
                if (user.role === 'admin') {
                    if (adminLink) adminLink.classList.remove('hidden');
                } else {
                    if (adminLink) adminLink.classList.add('hidden');
                }
            } else {
                if (userName) userName.textContent = '未登录';
                if (menuUserName) menuUserName.textContent = '未登录';
                if (menuUserEmail) menuUserEmail.textContent = '请登录';
                if (authButtons) authButtons.classList.remove('hidden');
                if (logoutButtons) logoutButtons.classList.add('hidden');
                if (profileLink) profileLink.classList.add('hidden');
                if (adminLink) adminLink.classList.add('hidden');
            }
        }

        // 退出登录
        function logout() {
            API.auth.logout();
            updateUserUI();
            showNotification('已退出登录', 'success');
        }

        // 加载产品数据
        async function loadProductsFromAPI() {
            try {
                const response = await API.products.getProducts();
                if (response.status === 'success') {
                    const apiProducts = response.data.products;
                    
                    // 转换API数据格式为前端格式
                    apiProducts.forEach(product => {
                        productData[product.id] = {
                            name: product.name,
                            brand: product.brand,
                            price: product.price,
                            color: product.color,
                            specs: product.specs,
                            performance: product.performance
                        };
                    });
                    
                    // 更新界面
                    updateDashboard();
                    updateProductComparison();
                    updateAnalysis();
                }
            } catch (error) {
                console.error('加载产品数据失败:', error);
            }
        }

        // 保存产品数据到API
        async function saveProductToAPI(productId, productInfo) {
            try {
                const productData = {
                    id: productId,
                    name: productInfo.name,
                    brand: productInfo.brand,
                    price: productInfo.price,
                    color: productInfo.color,
                    specs: productInfo.specs,
                    performance: productInfo.performance
                };
                
                const response = await API.products.createProduct(productData);
                if (response.status === 'success') {
                    showNotification('产品保存成功', 'success');
                }
            } catch (error) {
                console.error('保存产品数据失败:', error);
                showNotification('产品保存失败', 'error');
            }
        }

        // 调用AI分析API
        async function callAIAnalysis(productIds) {
            try {
                const response = await API.analysis.aiAnalysis(productIds);
                if (response.status === 'success') {
                    return response.data;
                }
            } catch (error) {
                console.error('AI分析失败:', error);
                showNotification('AI分析失败', 'error');
            }
        }

        // 保存报告到API
        async function saveReportToAPI(reportData) {
            try {
                const response = await API.reports.createReport(reportData);
                if (response.status === 'success') {
                    showNotification('报告保存成功', 'success');
                }
            } catch (error) {
                console.error('保存报告失败:', error);
                showNotification('报告保存失败', 'error');
            }
        }

        // Excel导入相关功能
        function initExcelImportEvents() {
            // 导入Excel按钮
            document.getElementById('import-excel-btn').addEventListener('click', function() {
                document.getElementById('import-excel-modal').classList.remove('hidden');
                loadExistingDataToTable();
            });

            // 关闭模态框按钮
            document.getElementById('close-excel-modal-btn').addEventListener('click', closeExcelModal);
            document.getElementById('cancel-import-btn').addEventListener('click', closeExcelModal);

            // 浏览文件按钮
            document.getElementById('browse-file-btn').addEventListener('click', function() {
                document.getElementById('excel-file-input').click();
            });

            // 文件输入变化
            document.getElementById('excel-file-input').addEventListener('change', handleFileSelect);

            // 移除文件按钮
            document.getElementById('remove-file-btn').addEventListener('click', removeSelectedFile);

            // 添加行按钮
            document.getElementById('add-row-btn').addEventListener('click', addNewRow);

            // 保存表格数据按钮
            document.getElementById('save-table-btn').addEventListener('click', saveTableData);

            // 使用模板创建按钮
            document.getElementById('use-template-btn').addEventListener('click', generateTemplate);

            // 确认导入按钮
            document.getElementById('confirm-import-btn').addEventListener('click', confirmImport);

            // 设置拖放区域
            setupDragAndDrop();
        }

        // 处理文件选择
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.name.endsWith('.xlsx') || file.name.endsWith('.csv')) {
                    document.getElementById('file-name').textContent = file.name;
                    document.getElementById('file-info').classList.remove('hidden');
                    
                    // 解析Excel文件
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = new Uint8Array(e.target.result);
                            const workbook = XLSX.read(data, { type: 'array' });
                            const firstSheetName = workbook.SheetNames[0];
                            const worksheet = workbook.Sheets[firstSheetName];
                            const jsonData = XLSX.utils.sheet_to_json(worksheet);
                            
                            // 显示数据到表格
                            displayDataInTable(jsonData);
                            
                        } catch (error) {
                            showNotification('文件解析失败，请检查文件格式', 'error');
                            console.error('Excel解析错误:', error);
                        }
                    };
                    reader.readAsArrayBuffer(file);
                } else {
                    showNotification('请选择.xlsx或.csv格式的文件', 'warning');
                    event.target.value = '';
                }
            }
        }

        // 显示数据到表格
        function displayDataInTable(data) {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            data.forEach((row, index) => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-dark-100 hover:bg-dark-200';
                
                tr.innerHTML = `
                    <td class="py-2 px-3">
                        <input type="text" value="${row.brand || ''}" class="input-field text-sm" placeholder="品牌" data-field="brand">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" value="${row.model || ''}" class="input-field text-sm" placeholder="型号" data-field="model">
                    </td>
                    <td class="py-2 px-3">
                        <input type="text" value="${row.name || ''}" class="input-field text-sm" placeholder="产品名称" data-field="name">
                    </td>
                    <td class="py-2 px-3">
                        <input type="number" value="${row.price || ''}" class="input-field text-sm" placeholder="价格" data-field="price">
                    </td>
                    <td class="py-2 px-3">
                        <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${index}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>`;
                
                tbody.appendChild(tr);
            });
            
            // 添加删除行事件
            document.querySelectorAll('.delete-row-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('tr').remove();
                });
            });
        }

        // 加载现有数据到表格
        function loadExistingDataToTable() {
            const existingData = Object.values(productData).map(product => ({
                brand: product.brand,
                model: product.id || Object.keys(productData).find(key => productData[key] === product),
                name: product.name,
                price: product.price
            }));
            
            displayDataInTable(existingData);
        }

        // 添加新行
        function addNewRow() {
            const tbody = document.getElementById('table-body');
            const rowIndex = tbody.children.length;
            
            const tr = document.createElement('tr');
            tr.className = 'border-b border-dark-100 hover:bg-dark-200';
            
            tr.innerHTML = `
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="品牌" data-field="brand">
                </td>
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="型号" data-field="model">
                </td>
                <td class="py-2 px-3">
                    <input type="text" class="input-field text-sm" placeholder="产品名称" data-field="name">
                </td>
                <td class="py-2 px-3">
                    <input type="number" class="input-field text-sm" placeholder="价格" data-field="price">
                </td>
                <td class="py-2 px-3">
                    <button class="text-danger hover:text-red-400 delete-row-btn" data-index="${rowIndex}">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            `;
            
            tbody.appendChild(tr);
            
            // 添加删除行事件
            tr.querySelector('.delete-row-btn').addEventListener('click', function() {
                tr.remove();
            });
        }

        // 保存表格数据
        function saveTableData() {
            const rows = document.querySelectorAll('#table-body tr');
            const tableData = [];
            
            rows.forEach(row => {
                const rowData = {};
                const inputs = row.querySelectorAll('input');
                
                inputs.forEach(input => {
                    const field = input.dataset.field;
                    const value = input.value.trim();
                    
                    if (field && value) {
                        rowData[field] = field === 'price' ? parseFloat(value) : value;
                    }
                });
                
                if (Object.keys(rowData).length > 0) {
                    tableData.push(rowData);
                }
            });
            
            if (tableData.length === 0) {
                showNotification('表格中没有有效数据', 'warning');
                return;
            }
            
            // 验证必填字段
            const invalidRows = tableData.filter(row => !row.brand || !row.model || !row.name || !row.price);
            if (invalidRows.length > 0) {
                showNotification('请填写所有必填字段（品牌、型号、名称、价格）', 'warning');
                return;
            }
            
            showNotification('数据保存成功', 'success');
            return tableData;
        }

        // 确认导入
        function confirmImport() {
            const tableData = saveTableData();
            if (!tableData) return;
            
            // 处理导入的数据
            const importedProducts = {};
            
            tableData.forEach(row => {
                // 检查是否已存在该型号
                if (productData[row.model]) {
                    // 更新现有产品
                    importedProducts[row.model] = {
                        ...productData[row.model],
                        brand: row.brand,
                        name: row.name,
                        price: row.price
                    };
                } else {
                    // 创建新产品
                    importedProducts[row.model] = {
                        name: row.name,
                        brand: row.brand,
                        price: row.price,
                        color: getBrandColor(row.brand),
                        specs: {
                            '屏幕尺寸': '未指定',
                            '识别技术': '未指定',
                            '识别准确率': '未指定',
                            '货道数量': '未指定',
                            '最大容量': '未指定',
                            '支付方式': '未指定',
                            '尺寸': '未指定',
                            '重量': '未指定',
                            '功率': '未指定',
                            '制冷方式': '未指定',
                            '温度范围': '未指定',
                            '网络连接': '未指定',
                            '操作系统': '未指定',
                            'CPU': '未指定',
                            '内存': '未指定',
                            '存储': '未指定',
                            '触摸屏': '未指定',
                            '摄像头数量': '未指定',
                            'AI芯片': '未指定',
                            '电池续航': '未指定',
                            '防盗系统': '未指定',
                            '远程管理': '未指定',
                            '故障诊断': '未指定',
                            '维护成本': '未指定',
                            '使用寿命': '未指定',
                            '售后服务': '未指定',
                            '软件更新': '未指定',
                            '数据安全': '未指定',
                            '能源效率': '未指定',
                            '噪音水平': '未指定',
                            '安装难度': '未指定'
                        },
                        performance: {
                            '识别速度': 80,
                            '系统响应': 80,
                            '稳定性': 80,
                            '节能性': 80,
                            '扩展性': 80,
                            '用户体验': 80
                        }
                    };
                }
            });
            
            // 合并数据
            Object.assign(productData, importedProducts);
            
            // 更新产品选择列表
            updateProductSelectionList();
            
            // 关闭模态框
            closeExcelModal();
            
            // 显示成功消息
            showNotification(`成功导入 ${tableData.length} 个产品`, 'success');
        }

        // 获取品牌颜色
        function getBrandColor(brand) {
            const brandColors = {
                'HAHA': '#3b82f6',
                'Micromart': '#8b5cf6',
                '365': '#10b981'
            };
            
            return brandColors[brand] || '#6b7280';
        }

        // 更新产品选择列表
        function updateProductSelectionList() {
            // 按品牌分组产品
            const brands = {};
            Object.keys(productData).forEach(model => {
                const product = productData[model];
                if (!brands[product.brand]) {
                    brands[product.brand] = [];
                }
                brands[product.brand].push({ model, ...product });
            });
            
            // 更新选择区域
            const selectionArea = document.querySelector('#comparison-section .grid.grid-cols-1.md\:grid-cols-3');
            selectionArea.innerHTML = '';
            
            // 为每个品牌创建选择区域
            Object.keys(brands).forEach(brand => {
                const brandProducts = brands[brand];
                const brandColor = getBrandColor(brand);
                
                const brandSection = document.createElement('div');
                brandSection.className = 'space-y-3';
                brandSection.innerHTML = `
                    <h4 class="font-medium" style="color: ${brandColor}">${brand}</h4>
                    <div class="space-y-2">
                        ${brandProducts.map(product => `
                            <label class="flex items-center text-sm">
                                <input type="checkbox" class="form-checkbox h-4 w-4 rounded bg-dark-200 border-dark-100 product-checkbox" 
                                       data-brand="${product.brand}" data-model="${product.model}" data-name="${product.name}"
                                       style="color: ${brandColor}">
                                <span class="ml-2">${product.name}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                
                selectionArea.appendChild(brandSection);
            });
            
            // 重新绑定产品选择事件
            document.querySelectorAll('.product-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', handleProductSelection);
            });
        }

        // 生成模板
        function generateTemplate() {
            const templateData = [
                { brand: 'HAHA', model: 'NEW-100', name: '新产品100', price: 12999 },
                { brand: 'Competitor', model: 'COMP-200', name: '竞争产品200', price: 11999 }
            ];
            
            displayDataInTable(templateData);
            showNotification('模板已生成，请编辑表格数据', 'info');
        }

        // 移除选中的文件
        function removeSelectedFile() {
            document.getElementById('excel-file-input').value = '';
            document.getElementById('file-info').classList.add('hidden');
        }

        // 设置拖放区域
        function setupDragAndDrop() {
            const dropArea = document.querySelector('.border-dashed');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                dropArea.classList.add('border-primary');
            }
            
            function unhighlight() {
                dropArea.classList.remove('border-primary');
            }
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    const fileInput = document.getElementById('excel-file-input');
                    fileInput.files = files;
                    
                    // 触发change事件
                    const event = new Event('change');
                    fileInput.dispatchEvent(event);
                }
            }
        }

        // 关闭Excel模态框
        function closeExcelModal() {
            document.getElementById('import-excel-modal').classList.add('hidden');
            // 重置文件输入
            document.getElementById('excel-file-input').value = '';
            document.getElementById('file-info').classList.add('hidden');
        }

        // 显示通知
        function showNotification(message, type = 'info') {
            // 创建通知元素
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-2 rounded-md shadow-lg z-50 transition-all duration-300 transform translate-x-full opacity-0`;
            
            // 设置通知类型样式
            if (type === 'success') {
                notification.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                notification.classList.add('bg-red-500', 'text-white');
            } else if (type === 'warning') {
                notification.classList.add('bg-yellow-500', 'text-white');
            } else {
                notification.classList.add('bg-blue-500', 'text-white');
            }
            
            // 设置通知内容
            notification.textContent = message;
            
            // 添加到页面
            document.body.appendChild(notification);
            
            // 显示通知
            setTimeout(() => {
                notification.classList.remove('translate-x-full', 'opacity-0');
            }, 10);
            
            // 3秒后隐藏通知
            setTimeout(() => {
                notification.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initAuth();
            initExcelImportEvents();
            
            // 如果已登录，加载产品数据
            if (API.utils.isAuthenticated()) {
                loadProductsFromAPI();
            }
        });
    </script>

</body></html>